namespace = race_assignement

#when creating a character via history, event or decision, make sure to give them the appropriate culture, graphical_culture and trait there

character_event = { # this is only for on_birth

	id = race_assignement.1
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		#First same-trait pairings
		if = {
			limit = {
				mother = {
					trait = race_human
				}
				real_father = {
					trait = race_human
				}
			}
			add_trait = race_human
		}
		if = {
			limit = {
				mother = {
					trait = race_high_elf
				}
				real_father = {
					trait = race_high_elf
				}
			}
			add_trait = race_high_elf
		}
		if = {
			limit = {
				mother = {
					trait = race_blood_elf
				}
				real_father = {
					trait = race_blood_elf
				}
			}
			add_trait = race_blood_elf
		}
		if = {
			limit = {
				mother = {
					trait = race_wretched
				}
				real_father = {
					trait = race_wretched
				}
			}
			add_trait = race_wretched
		}
		if = {
			limit = {
				mother = {
					trait = race_gnome
				}
				real_father = {
					trait = race_gnome
				}
			}
			add_trait = race_gnome
		}
		if = {
			limit = {
				mother = {
					trait = race_goblin
				}
				real_father = {
					trait = race_goblin
				}
			}
			add_trait = race_goblin
		}
		#Trolls are handled down in the crossbreed section
		if = {
			limit = {
				mother = {
					trait = race_ogre
				}
				real_father = {
					trait = race_ogre
				}
			}
			add_trait = race_ogre
		}
		if = {
			limit = {
				mother = {
					trait = race_murloc
				}
				real_father = {
					trait = race_murloc
				}
			}
			add_trait = race_murloc
		}
		if = {
			limit = {
				mother = {
					trait = race_gnoll
				}
				real_father = {
					trait = race_gnoll
				}
			}
			add_trait = race_gnoll
		}
		if = {
			limit = {
				mother = {
					trait = race_naga
				}
				real_father = {
					trait = race_naga
				}
			}
			add_trait = race_naga
		}
		if = {
			limit = {
				mother = {
					trait = race_trogg
				}
				real_father = {
					trait = race_trogg
				}
			}
			add_trait = race_trogg
		}
		if = {
			limit = {
				mother = {
					trait = race_kobold
				}
				real_father = {
					trait = race_kobold
				}
			}
			add_trait = race_kobold
		}
		if = {
			limit = {
				mother = {
					trait = race_draenei
				}
				real_father = {
					trait = race_draenei
				}
			}
			add_trait = race_draenei
		}
		if = {
			limit = {
				mother = {
					trait = race_broken
				}
				real_father = {
					trait = race_broken
				}
			}
			add_trait = race_broken
		}
		if = {
			limit = {
				mother = {
					trait = race_lost_one
				}
				real_father = {
					trait = race_lost_one
				}
			}
			add_trait = race_lost_one
		}
		if = {
			limit = {
				mother = {
					trait = race_pale_orc
				}
				real_father = {
					trait = race_pale_orc
				}
			}
			add_trait = race_pale_orc
		}
		if = {
			limit = {
				mother = {
					trait = race_half_elf
				}
				real_father = {
					trait = race_half_elf
				}
			}
			add_trait = race_half_elf
			random_list = {
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = half_high_elf
								has_character_flag = quarter_high_elf
							}
						}
						real_father = {
							NOR = {
								has_character_flag = half_high_elf
								has_character_flag = quarter_high_elf
							}
						}
					}
					set_character_flag = half_high_elf
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = half_blood_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							NOR = {
								has_character_flag = half_blood_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
					set_character_flag = half_blood_elf
				}
			}
		}
		if = {
			limit = {
				mother = {
					trait = race_half_draenei
				}
				real_father = {
					trait = race_half_draenei
				}
			}
			add_trait = race_half_draenei
		}
		if = {
			limit = {
				mother = {
					trait = race_half_ogre
				}
				real_father = {
					trait = race_half_ogre
				}
			}
			add_trait = race_half_ogre
		}
		# For the few race traits with multiple GFXes
		if = {
			limit = {
				mother = {
					trait = race_orc
				}
				real_father = {
					trait = race_orc
				}
			}
			add_trait = race_orc
			if = {
				limit = {
					trait = race_orc
					OR = {
						mother = {
							graphical_culture = rorcgfx
						}
						real_father = {
							graphical_culture = rorcgfx
						}
					}
				}
				set_graphical_culture = fel_orc
			}
		}
		if = {
			limit = {
				mother = {
					trait = race_dwarf
				}
				real_father = {
					trait = race_dwarf
				}
			}
			add_trait = race_dwarf
			random_list = {
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = bronzebeardgfx }
						}
						real_father = {
							NOT = { graphical_culture = bronzebeardgfx }
						}
					}
					set_graphical_culture = bronzebeard
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = blackdwarfgfx }
						}
						real_father = {
							NOT = { graphical_culture = blackdwarfgfx }
						}
					}
					set_graphical_culture = dark_iron
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = wilddwarfgfx }
						}
						real_father = {
							NOT = { graphical_culture = wilddwarfgfx }
						}
					}
					set_graphical_culture = wildhammer
				 }
			}
		}
		if = {
			limit = {
				mother = {
					trait = race_dragon
				}
				real_father = {
					trait = race_dragon
				}
			}
			add_trait = race_dragon
			random_list = {
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = bronzedragongfx }
						}
						real_father = {
							NOT = { graphical_culture = bronzedragongfx }
						}
					}
					set_graphical_culture = bronze_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = reddragongfx }
						}
						real_father = {
							NOT = { graphical_culture = reddragongfx }
						}
					}
					set_graphical_culture = red_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = blackdragongfx }
						}
						real_father = {
							NOT = { graphical_culture = blackdragongfx }
						}
					}
					set_graphical_culture = black_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = bluedragongfx }
						}
						real_father = {
							NOT = { graphical_culture = bluedragongfx }
						}
					}
					set_graphical_culture = blue_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = greendragongfx }
						}
						real_father = {
							NOT = { graphical_culture = greendragongfx }
						}
					}
					set_graphical_culture = green_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = infinitedragongfx }
						}
						real_father = {
							NOT = { graphical_culture = infinitedragongfx }
						}
					}
					set_graphical_culture = infinite_dragonflight
				 }
				 1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { graphical_culture = nightdragongfx }
						}
						real_father = {
							NOT = { graphical_culture = nightdragongfx }
						}
					}
					set_graphical_culture = nightmare_dragonflight
				 }
				 # Add more as needed
			}
		}
		#For crossbreeds and the cases with sub-races
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_human
						}
						real_father = {
							OR = {
								trait = race_high_elf
								trait = race_blood_elf
								trait = race_wretched
								#all other elves later
							}
						}
					}
					AND = {
						real_father = {
							trait = race_human
						}
						mother = {
							OR = {
								trait = race_high_elf
								trait = race_blood_elf
								trait = race_wretched
								#all other elves later
							}
						}
					}
				}
			}
			add_trait = race_half_elf
			if = {
				limit = {
					OR = {
						mother = {
							OR = {
								trait = race_high_elf
								AND = {
									trait = race_wretched
									culture = high_elven
								}
							}
						}
						real_father = {
							OR = {
								trait = race_high_elf
								AND = {
									trait = race_wretched
									culture = high_elven
								}
							}
						}
					}
				}
				set_character_flag = half_high_elf
			}
			if = {
				limit = {
					OR = {
						mother = {
							OR = {
								trait = race_blood_elf
								AND = {
									trait = race_wretched
									culture = blood_elven
								}
							}
						}
						real_father = {
							OR = {
								trait = race_blood_elf
								AND = {
									trait = race_wretched
									culture = blood_elven
								}
							}
						}
					}
				}
				set_character_flag = half_blood_elf
			}
			#Add GFX when it is done
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_half_elf
						}
						real_father = {
							trait = race_human
						}
					}
					AND = {
						real_father = {
							trait = race_half_elf
						}
						mother = {
							trait = race_human
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_human
				set_graphical_culture = humangfx
			}
			if = {
				limit = {
					OR = {
						mother = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_half_elf
				if = {
					limit = {
						OR = {
							mother = {
								has_character_flag = half_high_elf
							}
							real_father = {
								has_character_flag = half_high_elf
							}
						} 
					}
					set_character_flag = quarter_high_elf
				}
				if = {
					limit = {
						OR = {
							mother = {
								has_character_flag = half_blood_elf
							}
							real_father = {
								has_character_flag = half_blood_elf
							}
						} 
					}
					set_character_flag = quarter_blood_elf
				}
				#Add the GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_half_elf
						}
						real_father = {
							trait = race_high_elf
						}
					}
					AND = {
						real_father = {
							trait = race_half_elf
						}
						mother = {
							trait = race_high_elf
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_high_elf
				set_graphical_culture = helvengfx
			}
			if = {
				limit = {
					OR = {
						mother = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_half_elf
				set_character_flag = quarter_high_elf
				#Add the GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_half_elf
						}
						real_father = {
							trait = race_blood_elf
						}
					}
					AND = {
						real_father = {
							trait = race_half_elf
						}
						mother = {
							trait = race_blood_elf
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							OR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_blood_elf
				set_graphical_culture = belvengfx
			}
			if = {
				limit = {
					OR = {
						mother = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
						real_father = {
							NOR = {
								has_character_flag = quarter_high_elf
								has_character_flag = quarter_blood_elf
							}
						}
					}
				}
				add_trait = race_blood_elf
				set_character_flag = quarter_blood_elf
				#Add the GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_orc
						}
						real_father = {
							trait = race_ogre
						}
					}
					AND = {
						mother = {
							trait = race_ogre
						}
						real_father = {
							trait = race_orc
						}
					}
				}
			}
			add_trait = race_half_ogre
			#Add GFX later
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_orc
						}
						real_father = {
							trait = race_half_ogre
						}
					}
					AND = {
						mother = {
							trait = race_half_ogre
						}
						real_father = {
							trait = race_orc
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							has_character_flag = quarter_orc
						}
						real_father = {
							has_character_flag = quarter_orc
						}
					}
				}
				add_trait = race_orc
				if = {
					limit = {
						real_father = {
							has_character_flag = quarter_orc
						}
					}
					real_father = {
						PREV = {
							set_graphical_culture = PREV
						}
					}
				}
				if = { # In this order so mother will be the overriding one
					limit = {
						mother = {
							has_character_flag = quarter_orc
						}
					}
					mother = {
						PREV = {
							set_graphical_culture = PREV
						}
					}
				}
			}
			if = {
				limit = {
					mother = {
						NOT = { has_character_flag = quarter_orc }
					}
					real_father = {
						NOT = { has_character_flag = quarter_orc }
					}
				}
				add_trait = race_half_ogre
				set_character_flag = quarter_orc
				#Add GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_ogre
						}
						real_father = {
							trait = race_half_ogre
						}
					}
					AND = {
						mother = {
							trait = race_half_ogre
						}
						real_father = {
							trait = race_ogre
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							has_character_flag = quarter_ogre
						}
						real_father = {
							has_character_flag = quarter_ogre
						}
					}
				}
				add_trait = race_ogre
				set_graphical_culture = boulderfist # All of them use the same GFX, so doesn't matter
			}
			if = {
				limit = {
					mother = {
						NOT = { has_character_flag = quarter_ogre }
					}
					real_father = {
						NOT = { has_character_flag = quarter_ogre }
					}
				}
				add_trait = race_half_ogre
				set_character_flag = quarter_ogre
				#Add GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_orc
						}
						real_father = {
							OR = {
								trait = race_draenei
								trait = race_broken
								trait = race_lost_One
							}
						}
					}
					AND = {
						mother = {
							OR = {
								trait = race_draenei
								trait = race_broken
								trait = race_lost_One
							}
						}
						real_father = {
							trait = race_orc
						}
					}
				}
			}
			add_trait = race_half_draenei
			#Add GFX later
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_orc
						}
						real_father = {
							trait = race_half_draenei
						}
					}
					AND = {
						mother = {
							trait = race_half_draenei
						}
						real_father = {
							trait = race_orc
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							has_character_flag = quarter_orc
						}
						real_father = {
							has_character_flag = quarter_orc
						}
					}
				}
				add_trait = race_orc
				if = {
					limit = {
						real_father = {
							has_character_flag = quarter_orc
						}
					}
					real_father = {
						PREV = {
							set_graphical_culture = PREV
						}
					}
				}
				if = { # In this order so mother will be the overriding one
					limit = {
						mother = {
							has_character_flag = quarter_orc
						}
					}
					mother = {
						PREV = {
							set_graphical_culture = PREV
						}
					}
				}
			}
			if = {
				limit = {
					mother = {
						NOT = { has_character_flag = quarter_orc }
					}
					real_father = {
						NOT = { has_character_flag = quarter_orc }
					}
				}
				add_trait = race_half_draenei
				set_character_flag = quarter_orc
				#Add GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							OR = {
								trait = race_draenei
								trait = race_broken
								trait = race_lost_One
							}
						}
						real_father = {
							trait = race_half_draenei
						}
					}
					AND = {
						mother = {
							trait = race_half_draenei
						}
						real_father = {
							OR = {
								trait = race_draenei
								trait = race_broken
								trait = race_lost_One
							}
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							has_character_flag = quarter_draenei
						}
						real_father = {
							has_character_flag = quarter_draenei
						}
					}
				}
				if = {
					limit = {
						OR = {
							mother = {
								trait = race_draenei
							}
							real_father = {
								trait = race_draenei
							}
						}
					}
					add_trait = race_draenei
					#Add GFX later
				}
				if = {
					limit = {
						OR = {
							mother = {
								trait = race_broken
							}
							real_father = {
								trait = race_broken
							}
						}
					}
					add_trait = race_broken
					#Add GFX later
				}
				if = {
					limit = {
						OR = {
							mother = {
								trait = race_lost_one
							}
							real_father = {
								trait = race_lost_one
							}
						}
					}
					add_trait = race_draenei
					#Add GFX later
				}
			}
			if = {
				limit = {
					mother = {
						NOT = { has_character_flag = quarter_draenei }
					}
					real_father = {
						NOT = { has_character_flag = quarter_draenei }
					}
				}
				add_trait = race_half_draenei
				set_character_flag = quarter_draenei
				#Add GFX later
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_draenei
						}
						real_father = {
							trait = race_broken
						}
					}
					AND = {
						real_father = {
							trait = race_draenei
						}
						mother = {
							trait = race_broken
						}
					}
				}
			}
			random_list = {
				1 = {
					add_trait = race_draenei
					#Add GFX later
				}
				1 = {
					add_trait = race_broken
					#Add GFX later
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_lost_one
						}
						real_father = {
							trait = race_broken
						}
					}
					AND = {
						real_father = {
							trait = race_lost_one
						}
						mother = {
							trait = race_broken
						}
					}
				}
			}
			random_list = {
				1 = {
					add_trait = race_lost_one
					#Add GFX later
				}
				1 = {
					add_trait = race_broken
					#Add GFX later
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_draenei
						}
						real_father = {
							trait = race_lost_one
						}
					}
					AND = {
						real_father = {
							trait = race_draenei
						}
						mother = {
							trait = race_lost_one
						}
					}
				}
			}
			add_trait = broken
			#Add GFX later
		}
		if = {
			limit = {
				mother = {
					OR = {
						trait = race_troll_forest
						trait = race_troll_ice
						trait = race_troll_dark
						trait = race_troll_jungle
						trait = race_troll_sand
						trait = race_troll_zandalari
					}
				}
				real_father = {
					OR = {
						trait = race_troll_forest
						trait = race_troll_ice
						trait = race_troll_dark
						trait = race_troll_jungle
						trait = race_troll_sand
						trait = race_troll_zandalari
					}
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_forest }
						}
						real_father = {
							NOT = { trait = race_troll_forest }
						}
					}
					add_trait = race_troll_forest
					set_graphical_culture = amani
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_ice }
						}
						real_father = {
							NOT = { trait = race_troll_ice }
						}
					}
					add_trait = race_troll_ice
					set_graphical_culture = drakkari
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_dark }
						}
						real_father = {
							NOT = { trait = race_troll_dark }
						}
					}
					add_trait = race_troll_dark
					set_graphical_culture = shadowtooth
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_jungle }
						}
						real_father = {
							NOT = { trait = race_troll_jungle }
						}
					}
					add_trait = race_troll_jungle
					set_graphical_culture = gurubashi
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_sand }
						}
						real_father = {
							NOT = { trait = race_troll_sand }
						}
					}
					add_trait = race_troll_sand
					set_graphical_culture = sandfury
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOT = { trait = race_troll_zandalari }
						}
						real_father = {
							NOT = { trait = race_troll_zandalari }
						}
					}
					add_trait = race_troll_zandalari
					set_graphical_culture = zandalari
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						mother = {
							trait = race_orc
						}
						real_father = {
							trait = race_pale_orc
						}
					}
					AND = {
						real_father = {
							trait = race_orc
						}
						mother = {
							trait = race_pale_orc
						}
					}
				}
			}
			random_list = {
				1 = {
					add_trait = race_orc
					if = {
						limit = {
							real_father = {
								trait = race_orc
							}
						}
						real_father = {
							PREV = {
								set_graphical_culture = PREV
							}
						}
					}
					if = {
						limit = {
							mother = {
								trait = race_orc
							}
						}
						mother = {
							PREV = {
								set_graphical_culture = PREV
							}
						}
					}
				}
				1 = {
					add_trait = race_pale_orc
					if = {
						limit = {
							real_father = {
								trait = race_pale_orc
							}
						}
						real_father = {
							PREV = {
								set_graphical_culture = PREV
							}
						}
					}
					if = {
						limit = {
							mother = {
								trait = race_pale_orc
							}
						}
						mother = {
							PREV = {
								set_graphical_culture = PREV
							}
						}
					}
				}
			}
		}
		#If both parents are corrupted
		if = {
			limit = {
				mother = {
					OR = {
						trait = fel_touched
						trait = fel_tainted
						trait = fel_corrupted
						trait = felsworn
					}
				}
				real_father = {
					OR = {
						trait = fel_touched
						trait = fel_tainted
						trait = fel_corrupted
						trait = felsworn
					}
				}
			}
			random_list = {
				1 = {
					modifier = {
						factor = 0
						OR = {
							AND = {
								mother = {
									trait = fel_touched
								}
								real_father = {
									OR = {
										trait = fel_tainted
										trait = fel_corrupted
										trait = felsworn
									}
								}
							}
							AND = {
								mother = {
									OR = {
										trait = fel_tainted
										trait = fel_corrupted
										trait = felsworn
									}
								}
								real_father = {
									trait = fel_touched
								}
							}
							AND = {
								mother = {
									OR = {
										trait = fel_tainted
										trait = fel_corrupted
										trait = felsworn
									}
								}
								real_father = {
									OR = {
										trait = fel_tainted
										trait = fel_corrupted
										trait = felsworn
									}
								}
							}
						}
					}
					add_trait = fel_traces
				}
				1 = {
					modifier = {
						factor = 0
						OR = {
							AND = {
								mother = {
									trait = fel_tainted
								}
								real_father = {
									OR = {
										trait = fel_corrupted
										trait = felsworn
									}
								}
							}
							AND = {
								mother = {
									OR = {
										trait = fel_corrupted
										trait = felsworn
									}
								}
								real_father = {
									trait = fel_tainted
								}
							}
							AND = {
								mother = {
									OR = {
										trait = fel_corrupted
										trait = felsworn
									}
								}
								real_father = {
									OR = {
										trait = fel_corrupted
										trait = felsworn
									}
								}
							}
						}
					}
					add_trait = fel_touched
					trigger_switch = {
						on_trigger = trait
						race_high_elf = {
							set_graphical_culture = blood_elven
						}
					}
				}
				1 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								trait = fel_tainted
								trait = fel_corrupted
								trait = felsworn
							}
						}
						real_father = {
							NOR = {
								trait = fel_tainted
								trait = fel_corrupted
								trait = felsworn
							}
						}
					}
					add_trait = fel_tainted
					trigger_switch = {
						on_trigger = trait
						race_high_elf = {
							set_graphical_culture = blood_elven
						}
					}
				}
			}
		}
		#If one parent is corrupted
		if = {
			limit = {
				OR = {
					mother = {
						OR = {
							trait = fel_touched
							trait = fel_tainted
							trait = fel_corrupted
							trait = felsworn
						}
					}
					real_father = {
						OR = {
							trait = fel_touched
							trait = fel_tainted
							trait = fel_corrupted
							trait = felsworn
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							trait = fel_touched
						}
						real_father = {
							trait = fel_touched
						}
					}
				}
				random_list = {
					1 = {
						#nothing
					}
					1 = {
						add_trait = fel_traces
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							trait = fel_tainted
						}
					}
					OR = {
						father = {
							trait = fel_tainted
						}
					}
				}
				random_list = {
					1 = {
						add_trait = fel_traces
					}
					1 = {
						add_trait = fel_touched
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							trait = fel_corrupted
						}
					}
					OR = {
						father = {
							trait = fel_corrupted
						}
					}
				}
				random_list = {
					1 = {
						add_trait = fel_touched
					}
					1 = {
						add_trait = fel_tainted
						trigger_switch = {
							on_trigger = trait
							race_high_elf = {
								set_graphical_culture = blood_elven
							}
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						mother = {
							trait = felsworn
						}
					}
					OR = {
						father = {
							trait = felsworn
						}
					}
				}
				add_trait = fel_tainted
				trigger_switch = {
					on_trigger = trait
					race_high_elf = {
						set_graphical_culture = blood_elven
					}
				}
			}
		}
	}
}


character_event = { # this is for on_new_holder (for auto-generated new barons) and on_yearly_pulse (for auto-generated courtiers), and on_startup (to catch the missing ones during initialisation and loading saves.)

	id = race_assignement.2
	is_triggered_only = yes
	hide_window = yes
	
	trigger = { NOT = { TOW_has_race = yes } }
	
	immediate = {

		TOW_initialize_character_race_from_culture = yes
		TOW_update_character_race_from_liege = yes

		if = { # Update this later!
			limit = {
				NOT = { lifestyle_traits = 2 }
			}
			random_list = {
				6 = {
					# nothing
				}
				4 = {
					modifier = {
						factor = 0
						NOT = { martial = 10 }
						NOT = { stewardship = 10 }
						NOT = { intrigue = 10 }
						NOT = { learning = 10 }
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = death_knight
										trait = demon_hunter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = techmage
									}
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_arcanist }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = arcanist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = necrolyte
										trait = death_knight
										trait = demon_hunter
										trait = paladin
										trait = warlock
										trait = necromancer
										trait = arcanist
										trait = healer
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_necrolyte }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = nathrezim
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = gnoll
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = necrolyte
							if = {
								limit = {
									OR = {
										AND = {
											independent = yes
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
										liege = {
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
									}
								}
								set_character_flag = necrolyte_discovered
							}
							if = {
								limit = {
									NOR = {
										AND = {
											independent = yes
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
										liege = {
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											trait = gnoll
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = arcanist_fake
								}
								if = {
									limit = {
										OR = {
											trait = orc
											trait = gnoll
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = healer_fake
								}
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = healer
										trait = death_knight
										trait = demon_hunter
										trait = necrolyte
										trait = warlock
										trait = necromancer
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_healer }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = healer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = death_knight
										trait = demon_hunter
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_scout }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										culture = sayaad
										culture = nathrezim
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = scout
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = death_knight
										trait = demon_hunter
										trait = engineer
										trait = mechanist
										trait = techmage
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_tinker }
									stewardship = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = gnomish
										culture = goblin
									}
								}
							}
							add_trait = tinker
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = death_knight
										trait = demon_hunter
										trait = warrior
										trait = paladin
										trait = monk
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_fighter }
									martial = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										culture = draenei
										culture = broken
										culture = lost_one
										culture = annihilan
										culture = ered_ruin
										culture = mo_arg
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = fighter
						}
					}
					random_list = {
						8 = {
							# nothing
						}
						1 = {
							modifier = {
								factor = 0
								lifestyle_traits = 2
							}
							random_list = {
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = arcanist
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = mage
												trait = warlock
												trait = necromancer
												trait = runemaster
												trait = techmage
											}
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_arcanist }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture = draenei
												culture = broken
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = arcanist
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = paladin
												trait = warlock
												trait = necromancer
												trait = arcanist
												trait = healer
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_necrolyte }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = nathrezim
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = gnoll
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = necrolyte
									if = {
										limit = {
											OR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										set_character_flag = necrolyte_discovered
									}
									if = {
										limit = {
											NOR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										if = {
											limit = {
												NOR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = arcanist_fake
										}
										if = {
											limit = {
												OR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = healer_fake
										}
									}
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = healer
												trait = death_knight
												trait = demon_hunter
												trait = necrolyte
												trait = warlock
												trait = necromancer
												trait = priest
												trait = shaman
												trait = druid
												trait = witch_doctor
												trait = alchemist
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_healer }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = healer
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = blinded }
											NOT = { trait = inbred }
											NOT = {
												trait = scout
												trait = death_knight
												trait = demon_hunter
												trait = assassin
												trait = rogue
												trait = beastmaster
												trait = explorer
												trait = ranger
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_scout }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = sayaad
												culture = nathrezim
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = scout
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = tinker
												trait = death_knight
												trait = demon_hunter
												trait = engineer
												trait = mechanist
												trait = techmage
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_tinker }
											stewardship = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture = gnomish
												culture = goblin
											}
										}
									}
									add_trait = tinker
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = weak }
											NOT = { trait = feeble }
											NOT = { trait = inbred }
											NOT = {
												trait = fighter
												trait = death_knight
												trait = demon_hunter
												trait = warrior
												trait = paladin
												trait = monk
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_fighter }
											martial = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = draenei
												culture = broken
												culture = lost_one
												culture = annihilan
												culture = ered_ruin
												culture = mo_arg
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = fighter
								}
							}
						}
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = { martial = 15 }
						NOT = { stewardship = 15 }
						NOT = { intrigue = 15 }
						NOT = { learning = 15 }
						NOT = { has_character_flag = has_adv_class }
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_mage }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = mage
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = mage
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_warlock }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = nathrezim
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = warlock
							if = {
								limit = {
									NOT = { accepts_warlock = yes }
									liege = {
										NOT = { accepts_warlock = yes }
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = mage_fake
									add_character_modifier = { name = evocation_fake }
								}
								if = {
									limit = {
										OR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
												has_global_flag = human_shamanism
											}
										}
									}
									add_trait = shaman_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										has_global_flag = holy_light_founded
									}
									add_trait = priest_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										NOT = { has_global_flag = holy_light_founded }
										NOT = { has_global_flag = human_shamanism }
									}
									add_trait = healer_fake
								}
							}
							if = {
								limit = {
									OR = {
										accepts_warlock = yes
										liege = {
											accepts_warlock = yes
										}
									}
								}
								set_character_flag = warlock_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = mage
										trait = warlock
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_necromancer }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = gnoll
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										culture = lost_one
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = necromancer
							if = {
								limit = {
									NOT = { accepts_necromancer = yes }
									liege = {
										NOT = { accepts_necromancer = yes }
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = mage_fake
									add_character_modifier = { name = evocation_fake }
								}
								if = {
									limit = {
										OR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
												has_global_flag = human_shamanism
											}
										}
									}
									add_trait = shaman_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										has_global_flag = holy_light_founded
									}
									add_trait = priest_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										NOT = { has_global_flag = holy_light_founded }
										NOT = { has_global_flag = human_shamanism }
									}
									add_trait = healer_fake
								}
							}
							if = {
								limit = {
									OR = {
										accepts_necromancer = yes
										liege = {
											accepts_necromancer = yes
										}
									}
								}
								set_character_flag = necromancer_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = arcanist
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_runemaster }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										trait = ogre_magi
									}
								}
							}
							add_trait = runemaster
						}
						1 = {
							modifier = {
								factor = 0
								NOT = { trait = imbecile }
								NOT = { trait = distrusts_magic }
								NOT = {
									trait = healer
									trait = mage
									trait = warlock
									trait = necromancer
									trait = runemaster
									trait = shaman
									trait = druid
									trait = witch_doctor
									trait = alchemist
									trait = assassin
									trait = rogue
									trait = beastmaster
									trait = explorer
									trait = ranger
									trait = engineer
									trait = mechanist
									trait = techmage
									trait = warrior
									trait = paladin
									trait = monk
									trait = death_knight
									trait = demon_hunter
								}
								NOT = {	has_character_flag = has_adv_class }
								NOT = {	has_character_flag = ct_class_start }
								NOT = { has_character_flag = refused_priest }
								learning = 15
								OR = {
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
									religion_group = light_group
									religion_group = void_group
									religion_group = goblin_group
									religion_group = fel_group
									religion = sunwell
									religion = azshara
								}
								OR = {
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
									AND = {
										culture_group = human
										OR = {
											NOT = { has_global_flag = trollwars_bookmark }
											has_global_flag = holy_light_founded
										}
									}
									culture = high_elven
									culture = blood_elven
									culture = gnomish
									culture = goblin
									culture = bronzebeard
									culture = forsaken
									culture = scourge
									trait = ogre_magi
									culture = draenei
									culture = shivarra
									AND = {
										is_female = yes
										culture = naga
									}
								}
							}
							add_trait = priest
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_shaman }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										religion_group = elemental_group
										religion = old_gods
										religion = twilights_hammer
										religion = cult_of_the_infinite
										religion = cult_of_the_destroyer
										religion = emerald_nightmare
										religion = mercantilism
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											has_global_flag = human_shamanism
										}
										culture_group = orcish
										culture = goblin
										culture = wildhammer
										culture = murloc
										culture = kobold
										culture = gnoll
										culture = trogg
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = shaman
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_druid }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										religion_group = elemental_group
										religion_group = wild_gods_group
										religion = old_gods
										religion = twilights_hammer
										religion = emerald_nightmare
										religion = cult_of_the_dreamer
										religion = druidism
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = troll
										culture = lost_one
										AND = {
											religion = druidism
											has_global_flag = sunwell_embraced_nature
											OR = {
												culture = high_elven
												culture = blood_elven
											}
										}
									}
								}
							}
							add_trait = druid
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_witch_doctor }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = troll
										trait = ogre_magi
										culture = murloc
										culture = lost_one
									}
								}
							}
							add_trait = witch_doctor
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_alchemist }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = alchemist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_assassin }
									intrigue = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = sayaad
										culture = nathrezim
										culture = shivarra
										culture = broken
										culture = lost_one
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = assassin
							if = {
								limit = {
									NOT = { accepts_assassin = yes }
									liege = {
										NOT = { accepts_assassin = yes }
									}
								}
								add_trait = scout_fake
							}
							if = {
								limit = {
									OR = {
										accepts_assassin = yes
										liege = {
											accepts_assassin = yes
										}
									}
								}
								set_character_flag = assassin_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_rogue }
									intrigue = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										AND = {
											is_female = no
											culture = naga
										}
										culture = lost_one
										culture = broken
									}
								}
							}
							add_trait = rogue
							if = {
								limit = {
									NOT = { accepts_rogue = yes }
									liege = {
										NOT = { accepts_rogue = yes }
									}
								}
								add_trait = scout_fake
							}
							if = {
								limit = {
									OR = {
										accepts_rogue = yes
										liege = {
											accepts_rogue = yes
										}
									}
								}
								set_character_flag = rogue_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_beastmaster }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = goblin
										culture_group = dwarf
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture_group = ogre
										AND = {
											is_female = no
											culture = naga
										}
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = beastmaster
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_explorer }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = draenei
									}
								}
							}
							add_trait = explorer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_ranger }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture = eredar
										culture = draenei
										culture = broken
									}
								}
							}
							add_trait = ranger
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_engineer }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = engineer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_mechanist }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = mechanist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = tinker
										trait = arcanist
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_techmage }
									OR = {
										stewardship = 15
										learning = 15
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = techmage
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_warrior }
									martial = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										AND = {
											is_female = no
											culture = naga
										}
										culture = mo_arg
										culture = annihilan
										culture = ered_ruin
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = warrior
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_paladin }
									OR = {
										martial = 15
										learning = 15
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											NOT = { always = yes } #paladins exist
											OR = {
												AND = {
													culture_group = human
													OR = {
														religion_group = light_group
														has_landed_title = d_tyrs_guard
														any_liege = {
															has_landed_title = d_tyrs_guard
														}
														society_member_of = tyrs_guard_society
													}
												}
												AND = {
													culture = bronzebeard
													religion_group = light_group
												}
											}
										}
										AND = {
											religion_group = light_group
											culture = draenei
										}
										AND = {
											NOT = { always = yes } #blood knights exist
											culture = blood_elven
											religion = sunwell
										}
									}
								}
							}
							add_trait = paladin
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_monk }
									martial = 15
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
								}
							}
							add_trait = monk
						}
					}
					random_list = {
						8 = {
							# nothing
						}
						1 = {
							modifier = {
								factor = 0
								lifestyle_traits = 2
							}
							random_list = {
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = arcanist
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = mage
												trait = warlock
												trait = necromancer
												trait = runemaster
												trait = techmage
											}
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_arcanist }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture = draenei
												culture = broken
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = arcanist
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = paladin
												trait = warlock
												trait = necromancer
												trait = arcanist
												trait = healer
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_necrolyte }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = nathrezim
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = gnoll
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = necrolyte
									if = {
										limit = {
											OR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										set_character_flag = necrolyte_discovered
									}
									if = {
										limit = {
											NOR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										if = {
											limit = {
												NOR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = arcanist_fake
										}
										if = {
											limit = {
												OR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = healer_fake
										}
									}
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = healer
												trait = death_knight
												trait = demon_hunter
												trait = necrolyte
												trait = warlock
												trait = necromancer
												trait = priest
												trait = shaman
												trait = druid
												trait = witch_doctor
												trait = alchemist
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_healer }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = healer
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = blinded }
											NOT = { trait = inbred }
											NOT = {
												trait = scout
												trait = death_knight
												trait = demon_hunter
												trait = assassin
												trait = rogue
												trait = beastmaster
												trait = explorer
												trait = ranger
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_scout }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = sayaad
												culture = nathrezim
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = scout
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = tinker
												trait = death_knight
												trait = demon_hunter
												trait = engineer
												trait = mechanist
												trait = techmage
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_tinker }
											stewardship = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture = gnomish
												culture = goblin
											}
										}
									}
									add_trait = tinker
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = weak }
											NOT = { trait = feeble }
											NOT = { trait = inbred }
											NOT = {
												trait = fighter
												trait = death_knight
												trait = demon_hunter
												trait = warrior
												trait = paladin
												trait = monk
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_fighter }
											martial = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = draenei
												culture = broken
												culture = lost_one
												culture = annihilan
												culture = ered_ruin
												culture = mo_arg
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = fighter
								}
							}
						}
					}
				}
			}
		}
	}
}

character_event = { # On change of ruler, repeat the previous events for the court

	id = race_assignement.3
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		any_courtier = {
			character_event = {
				id = race_assignement.2
			}
		}
	}
}