namespace = race_assignement

#when creating a character via history, event or decision, make sure to give them the appropriate culture, graphical_culture and trait there

character_event = { # this is only for on_birth

	id = race_assignement.1
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		set_character_flag = race_assigned
		mother = {
			ROOT = { set_graphical_culture = PREV }
			trigger_switch = {
				on_trigger = trait
				
				human = {
					ROOT = { add_trait = human }
				}
				orc = {
					ROOT = { add_trait = orc }
				}
				dwarf = {
					ROOT = { add_trait = AK_trait_dwarf }
				}
				high_elf = {
					ROOT = { add_trait = high_elf }
				}
				blood_elf = {
					ROOT = { add_trait = blood_elf }
				}
				wretched = {
					ROOT = { add_trait = wretched }
				}
				gnome = {
					ROOT = { add_trait = gnome }
				}
				goblin = {
					ROOT = { add_trait = goblin }
				}
				dragon_red = {
					ROOT = { add_trait = dragon_red }
				}
				dragon_blue = {
					ROOT = { add_trait = dragon_blue }
				}
				dragon_bronze = {
					ROOT = { add_trait = dragon_bronze }
				}
				dragon_green = {
					ROOT = { add_trait = dragon_green }
				}
				dragon_black = {
					ROOT = { add_trait = dragon_black }
				}
				dragon_chromatic = {
					ROOT = { add_trait = dragon_chromatic }
				}
				dragon_twilight = {
					ROOT = { add_trait = dragon_twilight }
				}
				dragon_infinite = {
					ROOT = { add_trait = dragon_infinite }
				}
				dragon_nightmare = {
					ROOT = { add_trait = dragon_nightmare }
				}
				undead_scourge = {
					ROOT = { add_trait = undead_scourge }
				}
				undead_forsaken = {
					ROOT = { add_trait = undead_forsaken }
				}
				undead_generic = {
					ROOT = { add_trait = undead_generic }
				}
				troll_forest = {
					ROOT = { add_trait = troll_forest }
				}
				troll_ice = {
					ROOT = { add_trait = troll_ice }
				}
				troll_jungle = {
					ROOT = { add_trait = troll_jungle }
				}
				troll_sand = {
					ROOT = { add_trait = troll_sand }
				}
				troll_zandalari = {
					ROOT = { add_trait = troll_zandalari }
				}
				ogre = {
					ROOT = { add_trait = ogre }
				}
				murloc = {
					ROOT = { add_trait = murloc }
				}
				gnoll = {
					ROOT = { add_trait = gnoll }
				}
				naga = {
					ROOT = { add_trait = naga }
				}
				kobold = {
					ROOT = { add_trait = kobold }
				}
				trogg = {
					ROOT = { add_trait = trogg }
				}
				faceless = {
					ROOT = { add_trait = faceless }
				}
				eredar = {
					ROOT = { add_trait = eredar }
				}
				dreadlord = {
					ROOT = { add_trait = dreadlord }
				}
				succubus = {
					ROOT = { add_trait = succubus }
				}
				shivarra = {
					ROOT = { add_trait = shivarra }
				}
				pit_lord = {
					ROOT = { add_trait = pit_lord }
				}
				doomlord = {
					ROOT = { add_trait = doomlord }
				}
				fel_lord = {
					ROOT = { add_trait = fel_lord }
				}
				draenei = {
					ROOT = { add_trait = draenei }
				}
				broken = {
					ROOT = { add_trait = broken }
				}
				lost_one = {
					ROOT = { add_trait = lost_one }
				}
				voidwalker = {
					ROOT = { add_trait = voidwalker }
				}
				pale_orc = {
					ROOT = { add_trait = pale_orc }
				}
				air_elemental = {
					ROOT = { add_trait = air_elemental }
				}
				earth_elemental = {
					ROOT = { add_trait = earth_elemental }
				}
				fire_elemental = {
					ROOT = { add_trait = fire_elemental }
				}
				water_elemental = {
					ROOT = { add_trait = water_elemental }
				}
			}
		}
		any_sibling = {
			limit = {
				not = {
					has_character_flag = race_assigned
				}
			}
			set_character_flag = race_assigned
			mother = {
				ROOT = { set_graphical_culture = PREV }
				trigger_switch = {
					on_trigger = trait
					
					human = {
						ROOT = { add_trait = human }
					}
					orc = {
						ROOT = { add_trait = orc }
					}
					dwarf = {
						ROOT = { add_trait = AK_trait_dwarf }
					}
					high_elf = {
						ROOT = { add_trait = high_elf }
					}
					blood_elf = {
						ROOT = { add_trait = blood_elf }
					}
					wretched = {
						ROOT = { add_trait = wretched }
					}
					gnome = {
						ROOT = { add_trait = gnome }
					}
					goblin = {
						ROOT = { add_trait = goblin }
					}
					dragon_red = {
						ROOT = { add_trait = dragon_red }
					}
					dragon_blue = {
						ROOT = { add_trait = dragon_blue }
					}
					dragon_bronze = {
						ROOT = { add_trait = dragon_bronze }
					}
					dragon_green = {
						ROOT = { add_trait = dragon_green }
					}
					dragon_black = {
						ROOT = { add_trait = dragon_black }
					}
					dragon_chromatic = {
						ROOT = { add_trait = dragon_chromatic }
					}
					dragon_twilight = {
						ROOT = { add_trait = dragon_twilight }
					}
					dragon_infinite = {
						ROOT = { add_trait = dragon_infinite }
					}
					dragon_nightmare = {
						ROOT = { add_trait = dragon_nightmare }
					}
					undead_scourge = {
						ROOT = { add_trait = undead_scourge }
					}
					undead_forsaken = {
						ROOT = { add_trait = undead_forsaken }
					}
					undead_generic = {
						ROOT = { add_trait = undead_generic }
					}
					troll_forest = {
						ROOT = { add_trait = troll_forest }
					}
					troll_ice = {
						ROOT = { add_trait = troll_ice }
					}
					troll_jungle = {
						ROOT = { add_trait = troll_jungle }
					}
					troll_sand = {
						ROOT = { add_trait = troll_sand }
					}
					troll_zandalari = {
						ROOT = { add_trait = troll_zandalari }
					}
					ogre = {
						ROOT = { add_trait = ogre }
					}
					murloc = {
						ROOT = { add_trait = murloc }
					}
					gnoll = {
						ROOT = { add_trait = gnoll }
					}
					naga = {
						ROOT = { add_trait = naga }
					}
					kobold = {
						ROOT = { add_trait = kobold }
					}
					trogg = {
						ROOT = { add_trait = trogg }
					}
					faceless = {
						ROOT = { add_trait = faceless }
					}
					eredar = {
						ROOT = { add_trait = eredar }
					}
					dreadlord = {
						ROOT = { add_trait = dreadlord }
					}
					succubus = {
						ROOT = { add_trait = succubus }
					}
					shivarra = {
						ROOT = { add_trait = shivarra }
					}
					pit_lord = {
						ROOT = { add_trait = pit_lord }
					}
					doomlord = {
						ROOT = { add_trait = doomlord }
					}
					fel_lord = {
						ROOT = { add_trait = fel_lord }
					}
					draenei = {
						ROOT = { add_trait = draenei }
					}
					broken = {
						ROOT = { add_trait = broken }
					}
					lost_one = {
						ROOT = { add_trait = lost_one }
					}
					voidwalker = {
						ROOT = { add_trait = voidwalker }
					}
					pale_orc = {
						ROOT = { add_trait = pale_orc }
					}
					air_elemental = {
						ROOT = { add_trait = air_elemental }
					}
					earth_elemental = {
						ROOT = { add_trait = earth_elemental }
					}
					fire_elemental = {
						ROOT = { add_trait = fire_elemental }
					}
					water_elemental = {
						ROOT = { add_trait = water_elemental }
					}
				}
			}
		}
	}
}


character_event = { # this is for on_new_holder (for auto-generated new barons) and on_yearly_pulse (for auto-generated courtiers), and on_startup (to catch the missing ones during initialisation and loading saves.)

	id = race_assignement.2
	is_triggered_only = yes
	hide_window = yes
	
	trigger = { not = { has_character_flag = race_assigned } }
	
	immediate = {
		set_character_flag = race_assigned
		trigger_switch = {
			on_trigger = culture_group
			
			human = {
				add_trait = human 
			}
			orcish = {
				if = {
					limit = {
						liege = {
							graphical_culture = borcgfx
						}
						set_graphical_culture = mag_har
					}
				}
				if = {
					limit = {
						liege = {
							graphical_culture = rorcgfx
						}
						set_graphical_culture = fel_orc
					}
				}
				if = {
					limit = {
						OR = {
							NOT = { culture = twilights_hammer }
							has_global_flag = thirdwar_bookmark
							has_global_flag = wow_bookmark
							#Twilight's hammer was destroyed during second war, or at any point before
						}
					}
					add_trait = orc
					if = {
						limit = {
							culture = twilights_hammer
							set_graphical_culture = orc_gfx
						}
					}
					break = yes
				}
				#set_graphical_culture = gorc_gfx
				add_trait = pale_orc
			}
			dwarf = {
				add_trait = AK_trait_dwarf 
			}
			gnome = {
				add_trait = gnome 
			}
			goblin = {
				add_trait = goblin 
			}
			ogre = {
				add_trait = ogre 
			}
			murloc = {
				add_trait = murloc 
			}
			gnoll = {
				add_trait = gnoll 
			}
			naga = {
				add_trait = naga 
			}
			kobold = {
				add_trait = kobold 
			}
			trogg = {
				add_trait = trogg 
			}
		}
		trigger_switch = {
			on_trigger = culture
			
			high_elven = {
				if = {
					limit = {
						liege = {
							graphical_culture = welvengfx
							trait = wretched
						}
						set_graphical_culture = wretched
					}
				}
				add_trait = high_elf
			}
			blood_elven = {
				#if = {
				#	limit = {
				#		liege = {
				#			graphical_culture = felvengfx
				#		}
				#		set_graphical_culture = felblood
				#	}
				#}
				if = {
					limit = {
						liege = {
							graphical_culture = welvengfx
							trait = wretched
						}
						set_graphical_culture = wretched
					}
				}
				add_trait = blood_elf
			}
			felblood = {
				add_trait = blood_elf
				set_graphical_culture = felblood
				culture = blood_elven
				add_trait = felsworn
			}
			wretched = {
				add_trait = wretched
				set_graphical_culture = wretched
				culture = blood_elven
			}
			red_dragonflight = {
				add_trait = dragon_red
			}
			blue_dragonflight = {
				add_trait = dragon_blue
			}
			bronze_dragonflight = {
				add_trait = dragon_bronze
			}
			green_dragonflight = {
				add_trait = dragon_green
			}
			black_dragonflight = {
				add_trait = dragon_black
			}
			chromatic_dragonflight = {
				add_trait = dragon_chromatic
			}
			twilight_dragonflight = {
				add_trait = dragon_twilight
			}
			infinite_dragonflight = {
				add_trait = dragon_infinite
			}
			nightmare_dragonflight = {
				add_trait = dragon_nightmare
			}
			scourge = {
				add_trait = human
				add_trait = undead_scourge
			}
			forsaken = {
				add_trait = human
				add_trait = undead_forsaken
			}
			amani = {
				add_trait = troll_forest
			}
			atalai = {
				add_trait = troll_jungle
			}
			razorbranch = {
				add_trait = troll_jungle
			}
			firetree = {
				add_trait = troll_forest
			}
			mossflayer = {
				add_trait = troll_forest
			}
			revantusk = {
				add_trait = troll_forest
			}
			vilebranch = {
				add_trait = troll_forest
			}
			shadowpine = {
				add_trait = troll_forest
			}
			witherbark = {
				add_trait = troll_forest
			}
			bloodscalp = {
				add_trait = troll_jungle
			}
			darkspear = {
				add_trait = troll_jungle
			}
			gurubashi = {
				add_trait = troll_jungle
			}
			shatterspear = {
				add_trait = troll_jungle
			}
			skullsplitter = {
				add_trait = troll_jungle
			}
			drakkari = {
				add_trait = troll_ice
			}
			frostmane = {
				add_trait = troll_ice
			}
			sandfury = {
				add_trait = troll_sand
			}
			hakkari = {
				add_trait = troll_hakkari
			}
			smolderthorn = {
				add_trait = troll_forest
			}
			shadowglen = {
				add_trait = troll_forest
			}
			winterax = {
				add_trait = troll_ice
			}
			winterfang = {
				add_trait = troll_ice
			}
			shadowtooth = {
				add_trait = troll_dark
			}
			zandalari = {
				add_trait = troll_zandalari
			}
			eredar = {
				add_trait = eredar
			}
			nathrezim = {
				add_trait = dreadlord
			}
			sayaad = {
				add_trait = succubus
			}
			ered_ruin = {
				add_trait = doomlord
			}
			annihilan = {
				add_trait = pit_lord
			}
			mo_arg = {
				add_trait = fel_lord
			}
			shivarra = {
				add_trait = shivarra
			}
			draenei = {
				add_trait = draenei
			}
			broken = {
				add_trait = broken
			}
			lost_one = {
				add_trait = lost_one
			}
			nraqi = {
				add_trait = faceless
			}
			voidwalker = {
				add_trait = voidwalker
			}
			air_elemental = {
				ROOT = { add_trait = air_elemental }
			}
			earth_elemental = {
				ROOT = { add_trait = earth_elemental }
			}
			fire_elemental = {
				ROOT = { add_trait = fire_elemental }
			}
			water_elemental = {
				ROOT = { add_trait = water_elemental }
			}
		}
		if = {
			limit = {
				NOT = { lifestyle_traits = 2 }
			}
			random_list = {
				6 = {
					# nothing
				}
				4 = {
					modifier = {
						factor = 0
						NOT = { martial = 10 }
						NOT = { stewardship = 10 }
						NOT = { intrigue = 10 }
						NOT = { learning = 10 }
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = death_knight
										trait = demon_hunter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = techmage
									}
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_arcanist }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = arcanist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = necrolyte
										trait = death_knight
										trait = demon_hunter
										trait = paladin
										trait = warlock
										trait = necromancer
										trait = arcanist
										trait = healer
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_necrolyte }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = nathrezim
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = gnoll
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = necrolyte
							if = {
								limit = {
									OR = {
										AND = {
											independent = yes
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
										liege = {
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
									}
								}
								set_character_flag = necrolyte_discovered
							}
							if = {
								limit = {
									NOR = {
										AND = {
											independent = yes
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
										liege = {
											OR = {
												accepts_warlock = yes
												accepts_necromancer = yes
											}
										}
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											trait = gnoll
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = arcanist_fake
								}
								if = {
									limit = {
										OR = {
											trait = orc
											trait = gnoll
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = healer_fake
								}
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = healer
										trait = death_knight
										trait = demon_hunter
										trait = necrolyte
										trait = warlock
										trait = necromancer
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_healer }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = healer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = death_knight
										trait = demon_hunter
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_scout }
									learning = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										culture = sayaad
										culture = nathrezim
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = scout
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = death_knight
										trait = demon_hunter
										trait = engineer
										trait = mechanist
										trait = techmage
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_tinker }
									stewardship = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = gnomish
										culture = goblin
									}
								}
							}
							add_trait = tinker
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = death_knight
										trait = demon_hunter
										trait = warrior
										trait = paladin
										trait = monk
									}
									NOT = {	lifestyle_traits = 2 }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_fighter }
									martial = 10
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										culture = draenei
										culture = broken
										culture = lost_one
										culture = annihilan
										culture = ered_ruin
										culture = mo_arg
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = fighter
						}
					}
					random_list = {
						8 = {
							# nothing
						}
						1 = {
							modifier = {
								factor = 0
								lifestyle_traits = 2
							}
							random_list = {
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = arcanist
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = mage
												trait = warlock
												trait = necromancer
												trait = runemaster
												trait = techmage
											}
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_arcanist }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture = draenei
												culture = broken
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = arcanist
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = paladin
												trait = warlock
												trait = necromancer
												trait = arcanist
												trait = healer
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_necrolyte }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = nathrezim
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = gnoll
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = necrolyte
									if = {
										limit = {
											OR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										set_character_flag = necrolyte_discovered
									}
									if = {
										limit = {
											NOR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										if = {
											limit = {
												NOR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = arcanist_fake
										}
										if = {
											limit = {
												OR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = healer_fake
										}
									}
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = healer
												trait = death_knight
												trait = demon_hunter
												trait = necrolyte
												trait = warlock
												trait = necromancer
												trait = priest
												trait = shaman
												trait = druid
												trait = witch_doctor
												trait = alchemist
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_healer }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = healer
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = blinded }
											NOT = { trait = inbred }
											NOT = {
												trait = scout
												trait = death_knight
												trait = demon_hunter
												trait = assassin
												trait = rogue
												trait = beastmaster
												trait = explorer
												trait = ranger
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_scout }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = sayaad
												culture = nathrezim
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = scout
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = tinker
												trait = death_knight
												trait = demon_hunter
												trait = engineer
												trait = mechanist
												trait = techmage
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_tinker }
											stewardship = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture = gnomish
												culture = goblin
											}
										}
									}
									add_trait = tinker
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = weak }
											NOT = { trait = feeble }
											NOT = { trait = inbred }
											NOT = {
												trait = fighter
												trait = death_knight
												trait = demon_hunter
												trait = warrior
												trait = paladin
												trait = monk
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_fighter }
											martial = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = draenei
												culture = broken
												culture = lost_one
												culture = annihilan
												culture = ered_ruin
												culture = mo_arg
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = fighter
								}
							}
						}
					}
				}
				2 = {
					modifier = {
						factor = 0
						NOT = { martial = 15 }
						NOT = { stewardship = 15 }
						NOT = { intrigue = 15 }
						NOT = { learning = 15 }
						NOT = { has_character_flag = has_adv_class }
					}
					random_list = {
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_mage }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											OR = {
												NOT = { has_global_flag = trollwars_bookmark }
												has_global_flag = trollwar_humans_join
											}
										}
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = dark_iron
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = mage
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = mage
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_warlock }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = nathrezim
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										culture = lost_one
										culture = shivarra
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = warlock
							if = {
								limit = {
									NOT = { accepts_warlock = yes }
									liege = {
										NOT = { accepts_warlock = yes }
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = mage_fake
									add_character_modifier = { name = evocation_fake }
								}
								if = {
									limit = {
										OR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
												has_global_flag = human_shamanism
											}
										}
									}
									add_trait = shaman_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										has_global_flag = holy_light_founded
									}
									add_trait = priest_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										NOT = { has_global_flag = holy_light_founded }
										NOT = { has_global_flag = human_shamanism }
									}
									add_trait = healer_fake
								}
							}
							if = {
								limit = {
									OR = {
										accepts_warlock = yes
										liege = {
											accepts_warlock = yes
										}
									}
								}
								set_character_flag = warlock_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = arcanist
										trait = necrolyte
										trait = mage
										trait = warlock
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_necromancer }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = eredar
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture = gnoll
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										culture = lost_one
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = necromancer
							if = {
								limit = {
									NOT = { accepts_necromancer = yes }
									liege = {
										NOT = { accepts_necromancer = yes }
									}
								}
								if = {
									limit = {
										NOR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
											}
										}
									}
									add_trait = mage_fake
									add_character_modifier = { name = evocation_fake }
								}
								if = {
									limit = {
										OR = {
											trait = orc
											AND = {
												trait = human
												OR = {
													has_global_flag = trollwars_bookmark
													NOT = { has_global_flag = trollwar_humans_join }
												}
												has_global_flag = human_shamanism
											}
										}
									}
									add_trait = shaman_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										has_global_flag = holy_light_founded
									}
									add_trait = priest_fake
								}
								if = {
									limit = {
										trait = human
										OR = {
											has_global_flag = trollwars_bookmark
											NOT = { has_global_flag = trollwar_humans_join }
										}
										NOT = { has_global_flag = holy_light_founded }
										NOT = { has_global_flag = human_shamanism }
									}
									add_trait = healer_fake
								}
							}
							if = {
								limit = {
									OR = {
										accepts_necromancer = yes
										liege = {
											accepts_necromancer = yes
										}
									}
								}
								set_character_flag = necromancer_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = arcanist
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_runemaster }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										trait = ogre_magi
									}
								}
							}
							add_trait = runemaster
						}
						1 = {
							modifier = {
								factor = 0
								NOT = { trait = imbecile }
								NOT = { trait = distrusts_magic }
								NOT = {
									trait = healer
									trait = mage
									trait = warlock
									trait = necromancer
									trait = runemaster
									trait = shaman
									trait = druid
									trait = witch_doctor
									trait = alchemist
									trait = assassin
									trait = rogue
									trait = beastmaster
									trait = explorer
									trait = ranger
									trait = engineer
									trait = mechanist
									trait = techmage
									trait = warrior
									trait = paladin
									trait = monk
									trait = death_knight
									trait = demon_hunter
								}
								NOT = {	has_character_flag = has_adv_class }
								NOT = {	has_character_flag = ct_class_start }
								NOT = { has_character_flag = refused_priest }
								learning = 15
								OR = {
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
									religion_group = light_group
									religion_group = void_group
									religion_group = goblin_group
									religion_group = fel_group
									religion = sunwell
									religion = azshara
								}
								OR = {
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
									AND = {
										culture_group = human
										OR = {
											NOT = { has_global_flag = trollwars_bookmark }
											has_global_flag = holy_light_founded
										}
									}
									culture = high_elven
									culture = blood_elven
									culture = gnomish
									culture = goblin
									culture = bronzebeard
									culture = forsaken
									culture = scourge
									trait = ogre_magi
									culture = draenei
									culture = shivarra
									AND = {
										is_female = yes
										culture = naga
									}
								}
							}
							add_trait = priest
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_shaman }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										religion_group = elemental_group
										religion = old_gods
										religion = twilights_hammer
										religion = cult_of_the_infinite
										religion = cult_of_the_destroyer
										religion = emerald_nightmare
										religion = mercantilism
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											culture_group = human
											has_global_flag = human_shamanism
										}
										culture_group = orcish
										culture = goblin
										culture = wildhammer
										culture = murloc
										culture = kobold
										culture = gnoll
										culture = trogg
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = shaman
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_druid }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										religion_group = elemental_group
										religion_group = wild_gods_group
										religion = old_gods
										religion = twilights_hammer
										religion = emerald_nightmare
										religion = cult_of_the_dreamer
										religion = druidism
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = troll
										culture = lost_one
										AND = {
											religion = druidism
											has_global_flag = sunwell_embraced_nature
											OR = {
												culture = high_elven
												culture = blood_elven
											}
										}
									}
								}
							}
							add_trait = druid
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_witch_doctor }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = troll
										trait = ogre_magi
										culture = murloc
										culture = lost_one
									}
								}
							}
							add_trait = witch_doctor
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = healer
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_alchemist }
									learning = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										trait = ogre_magi
										culture_group = orcish
										culture = draenei
										culture = broken
										AND = {
											is_female = yes
											culture = naga
										}
									}
								}
							}
							add_trait = alchemist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_assassin }
									intrigue = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = sayaad
										culture = nathrezim
										culture = shivarra
										culture = broken
										culture = lost_one
										AND = {
											is_female = no
											culture = naga
										}
									}
								}
							}
							add_trait = assassin
							if = {
								limit = {
									NOT = { accepts_assassin = yes }
									liege = {
										NOT = { accepts_assassin = yes }
									}
								}
								add_trait = scout_fake
							}
							if = {
								limit = {
									OR = {
										accepts_assassin = yes
										liege = {
											accepts_assassin = yes
										}
									}
								}
								set_character_flag = assassin_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_rogue }
									intrigue = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										AND = {
											is_female = no
											culture = naga
										}
										culture = lost_one
										culture = broken
									}
								}
							}
							add_trait = rogue
							if = {
								limit = {
									NOT = { accepts_rogue = yes }
									liege = {
										NOT = { accepts_rogue = yes }
									}
								}
								add_trait = scout_fake
							}
							if = {
								limit = {
									OR = {
										accepts_rogue = yes
										liege = {
											accepts_rogue = yes
										}
									}
								}
								set_character_flag = rogue_discovered
							}
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_beastmaster }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = goblin
										culture_group = dwarf
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture_group = ogre
										AND = {
											is_female = no
											culture = naga
										}
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = beastmaster
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_explorer }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = draenei
									}
								}
							}
							add_trait = explorer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = blinded }
									NOT = { trait = inbred }
									NOT = {
										trait = scout
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_ranger }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture = eredar
										culture = draenei
										culture = broken
									}
								}
							}
							add_trait = ranger
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_engineer }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = engineer
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = {
										trait = tinker
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = techmage
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_mechanist }
									stewardship = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = mechanist
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = imbecile }
									NOT = { trait = distrusts_magic }
									NOT = {
										trait = tinker
										trait = arcanist
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = warrior
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_techmage }
									OR = {
										stewardship = 15
										learning = 15
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture = goblin
										culture = gnomish
									}
								}
							}
							add_trait = techmage
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = paladin
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_warrior }
									martial = 15
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										culture_group = human
										culture = high_elven
										culture = blood_elven
										culture_group = troll
										culture = gnomish
										culture = goblin
										culture_group = dwarf
										culture = forsaken
										culture = scourge
										culture_group = ogre
										culture_group = orcish
										culture = murloc
										culture = gnoll
										culture = kobold
										culture = trogg
										culture = eredar
										AND = {
											is_female = no
											culture = naga
										}
										culture = mo_arg
										culture = annihilan
										culture = ered_ruin
										culture = draenei
										culture = broken
										culture = lost_one
									}
								}
							}
							add_trait = warrior
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = monk
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_paladin }
									OR = {
										martial = 15
										learning = 15
									}
									OR = {
										has_game_rule = {
											name = class_requirements
											value = unrestricted
										}
										AND = {
											NOT = { always = yes } #paladins exist
											OR = {
												AND = {
													culture_group = human
													OR = {
														religion_group = light_group
														has_landed_title = d_tyrs_guard
														any_liege = {
															has_landed_title = d_tyrs_guard
														}
														society_member_of = tyrs_guard_society
													}
												}
												AND = {
													culture = bronzebeard
													religion_group = light_group
												}
											}
										}
										AND = {
											religion_group = light_group
											culture = draenei
										}
										AND = {
											NOT = { always = yes } #blood knights exist
											culture = blood_elven
											religion = sunwell
										}
									}
								}
							}
							add_trait = paladin
						}
						1 = {
							modifier = {
								factor = 0
								NOR = {
									NOT = { trait = weak }
									NOT = { trait = feeble }
									NOT = { trait = inbred }
									NOT = {
										trait = fighter
										trait = mage
										trait = warlock
										trait = necromancer
										trait = runemaster
										trait = priest
										trait = shaman
										trait = druid
										trait = witch_doctor
										trait = alchemist
										trait = assassin
										trait = rogue
										trait = beastmaster
										trait = explorer
										trait = ranger
										trait = engineer
										trait = mechanist
										trait = techmage
										trait = warrior
										trait = paladin
										trait = death_knight
										trait = demon_hunter
									}
									NOT = {	has_character_flag = has_adv_class }
									NOT = {	has_character_flag = ct_class_start }
									NOT = { has_character_flag = refused_monk }
									martial = 15
									has_game_rule = {
										name = class_requirements
										value = unrestricted
									}
								}
							}
							add_trait = monk
						}
					}
					random_list = {
						8 = {
							# nothing
						}
						1 = {
							modifier = {
								factor = 0
								lifestyle_traits = 2
							}
							random_list = {
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = arcanist
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = mage
												trait = warlock
												trait = necromancer
												trait = runemaster
												trait = techmage
											}
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_arcanist }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture = draenei
												culture = broken
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = arcanist
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = { trait = distrusts_magic }
											NOT = {
												trait = necrolyte
												trait = death_knight
												trait = demon_hunter
												trait = paladin
												trait = warlock
												trait = necromancer
												trait = arcanist
												trait = healer
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_necrolyte }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												AND = {
													culture_group = human
													OR = {
														NOT = { has_global_flag = trollwars_bookmark }
														has_global_flag = trollwar_humans_join
													}
												}
												culture = nathrezim
												culture = eredar
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture = dark_iron
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = gnoll
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = necrolyte
									if = {
										limit = {
											OR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										set_character_flag = necrolyte_discovered
									}
									if = {
										limit = {
											NOR = {
												AND = {
													independent = yes
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
												liege = {
													OR = {
														accepts_warlock = yes
														accepts_necromancer = yes
													}
												}
											}
										}
										if = {
											limit = {
												NOR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = arcanist_fake
										}
										if = {
											limit = {
												OR = {
													trait = orc
													trait = gnoll
													AND = {
														trait = human
														OR = {
															has_global_flag = trollwars_bookmark
															NOT = { has_global_flag = trollwar_humans_join }
														}
													}
												}
											}
											add_trait = healer_fake
										}
									}
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = healer
												trait = death_knight
												trait = demon_hunter
												trait = necrolyte
												trait = warlock
												trait = necromancer
												trait = priest
												trait = shaman
												trait = druid
												trait = witch_doctor
												trait = alchemist
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_healer }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												trait = ogre_magi
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = yes
													culture = naga
												}
											}
										}
									}
									add_trait = healer
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = blinded }
											NOT = { trait = inbred }
											NOT = {
												trait = scout
												trait = death_knight
												trait = demon_hunter
												trait = assassin
												trait = rogue
												trait = beastmaster
												trait = explorer
												trait = ranger
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_scout }
											learning = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = sayaad
												culture = nathrezim
												culture = draenei
												culture = broken
												culture = lost_one
												culture = shivarra
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = scout
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = imbecile }
											NOT = {
												trait = tinker
												trait = death_knight
												trait = demon_hunter
												trait = engineer
												trait = mechanist
												trait = techmage
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_tinker }
											stewardship = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture = gnomish
												culture = goblin
											}
										}
									}
									add_trait = tinker
								}
								1 = {
									modifier = {
										factor = 0
										NOR = {
											NOT = { trait = weak }
											NOT = { trait = feeble }
											NOT = { trait = inbred }
											NOT = {
												trait = fighter
												trait = death_knight
												trait = demon_hunter
												trait = warrior
												trait = paladin
												trait = monk
											}
											NOT = {	lifestyle_traits = 2 }
											NOT = {	has_character_flag = ct_class_start }
											NOT = { has_character_flag = refused_fighter }
											martial = 10
											OR = {
												has_game_rule = {
													name = class_requirements
													value = unrestricted
												}
												culture_group = human
												culture = high_elven
												culture = blood_elven
												culture_group = troll
												culture = gnomish
												culture = goblin
												culture_group = dwarf
												culture = forsaken
												culture = scourge
												culture_group = ogre
												culture_group = orcish
												culture = murloc
												culture = gnoll
												culture = kobold
												culture = trogg
												culture = eredar
												culture = draenei
												culture = broken
												culture = lost_one
												culture = annihilan
												culture = ered_ruin
												culture = mo_arg
												AND = {
													is_female = no
													culture = naga
												}
											}
										}
									}
									add_trait = fighter
								}
							}
						}
					}
				}
			}
		}
	}
}

character_event = { # On change of ruler, repeat the previous events for the court

	id = race_assignement.3
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		any_courtier = {
			character_event = {
				id = race_assignement.2
			}
		}
	}
}