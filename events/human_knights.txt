namespace = knights

letter_event = {
	id = knights.1
	desc = EVTDESCKNIGHTS.1 # To the [GetFromRootCompliment] [Root.GetBestName],\n\nAs your liege, I, [From.GetFullName], would like to name you a knight of [From.Title.GetName] in recognition of your prowess a warrior.\n\nSigned, [From.GetBestName]
	border = "GFX_event_letter_frame_diplomacy"

	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				trait = craven
			}
		}
		name = EVTOPTKNIGHTS.1a # I accept your offer of knighthood, my liege.
		FROM = { character_event = { id = knights.2 } }
	}
	
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 0
				trait = brave
			}
		}
		name = EVTOPTKNIGHTS.1b # I'm afraid I must refuse.
		prestige = -20
		set_character_flag = refused_knighthood
	}
}

character_event = {
	id = knights.2
	desc = EVTDESCKNIGHTS.2 # [From.GetBestName] kneels before you. You lightly touch a sword to both [From.GetHerHis] shoulders and, once [From.GetSheHe] swears the knightly vows, name them a knight of [Root.Title.GetName].
	picture = "GFX_evt_throne_room"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.2 # Arise, my knight.
		hidden_tooltip = {
			FROM = { character_event = { id = knights.3 } }
		}
	}
}

character_event = {
	id = knights.3
	desc = EVTDESCKNIGHTS.3 # You kneel before [From.GetTitledName] and swear your knightly vows. [From.GetTitledName] then orders your to rise and take your place as a knight of [From.Title.GetName].
	picture = "GFX_evt_throne_room"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.3 # I vow to serve you, my [From.GetLordLady].
		prestige = 20
		if = {
			limit = {
				is_female = no
			}
			give_minor_title = title_knight_male
		}
		if = {
			limit = {
				is_female = yes
			}
			give_minor_title = title_knight_female
		}
	}
}

#4 through 6 were removed

character_event = {
	id = knights.7
	desc = EVTDESCKNIGHTS.7 # You have ordered the forming of the Brotherhood of the Horse, a chivalrous order of Knights under the authority of Stormwind. One of your houseshold knights, [horse_commander.GetBestName] has been granted the title of Knight-Commander in the Brotherhood.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.7 # For Stormwind!
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					ai = no
					trait = human
					NOR = {
						trait = undead_generic
						trait = undead_scourge
						trait = undead_forsaken
					}
				}
				character_event = { id = knights.8 }
			}
		}
		set_global_flag = sw_knights_active
		clear_event_target = horse_commander
	}
}

character_event = {
	id = knights.8
	desc = EVTDESCKNIGHTS.8 # The king of Stormwind, [From.GetBestName], has order the creation of a knightly order: the Brotherhood of the Horse. These knights are sworn to Stormwind, and are unified under a structured and hierarchical organization.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.8 # Interesting.
	}
}

character_event = {
	id = knights.9
	desc = EVTDESCKNIGHTS.9 # Due to the current circumstances, the Brotherhood of the Horse has been disbanded.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_landed_title = d_brotherhood_of_the_horse
		any_liege = {
			NOR = {
				trait = human
				NOT = {
					trait = undead_scourge
					trait = undead_forsaken
					trait = undead_generic
				}
				has_landed_title = k_stormwind
			}
		}
	}
	
	immediate = {
		activate_title = { title = d_brotherhood_of_the_horse status = no }
		clr_global_flag = sw_knights_active
	}
	
	option = {
		name = EVTOPTKNIGHTS.9 # ... very well.
	}
}

character_event = {
	id = knights.10
	desc = EVTDESCKNIGHTS.10 # You have ordered the forming of the Ravenguard, a chivalrous order of Knights under the authority of Alterac. One of your houseshold knights, [raven_commander.GetBestName] has been granted the title of Knight-Commander in the Ravenguard.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.10 # For Alterac!
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					ai = no
					trait = human
					NOR = {
						trait = undead_generic
						trait = undead_scourge
						trait = undead_forsaken
					}
				}
				character_event = { id = knights.11 }
			}
		}
		set_global_flag = alt_knights_active
		clear_event_target = raven_commander
	}
}

character_event = {
	id = knights.11
	desc = EVTDESCKNIGHTS.11 # The king of Alterac, [From.GetBestName], has order the creation of a knightly order: the Ravenguard. These knights are sworn to Alterac, and are unified under a structured and hierarchical organization.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.8 # Interesting.
	}
}

character_event = {
	id = knights.12
	desc = EVTDESCKNIGHTS.12 # Due to the current circumstances, the Ravenguard has been disbanded.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_landed_title = d_ravenguard
		any_liege = {
			NOR = {
				trait = human
				NOT = {
					trait = undead_scourge
					trait = undead_forsaken
					trait = undead_generic
				}
				has_landed_title = k_alterac
			}
		}
	}
	
	immediate = {
		activate_title = { title = d_ravenguard status = no }
		clr_global_flag = alt_knights_active
	}
	
	option = {
		name = EVTOPTKNIGHTS.9 # ... very well.
	}
}

character_event = {
	id = knights.13
	desc = {
		trigger = {
			NOT = { has_landed_title = e_arathor }
		}
		text = EVTDESCKNIGHTS.13a # You have ordered the forming of the Order of the Firstborn, a chivalrous order of Knights under the authority of Stromgarde. One of your houseshold knights, [firstborn_commander.GetBestName] has been granted the title of Knight-Commander in the Order.
	}
	desc = {
		trigger = {
			has_landed_title = e_arathor
		}
		text = EVTDESCKNIGHTS.13b # You have ordered the forming of the Order of the Firstborn, a chivalrous order of Knights under the authority of Arathor. One of your houseshold knights, [firstborn_commander.GetBestName] has been granted the title of Knight-Commander in the Order.
	}
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = {
			trigger = {
				NOT = { has_landed_title = e_arathor }
			}
			text = EVTOPTKNIGHTS.13a # For Stromgarde!
		}
		name = {
			trigger = {
				has_landed_title = e_arathor
			}
			text = EVTOPTKNIGHTS.13b # For Arathor!
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					ai = no
					trait = human
					NOR = {
						trait = undead_generic
						trait = undead_scourge
						trait = undead_forsaken
					}
				}
				character_event = { id = knights.14 }
			}
		}
		set_global_flag = strom_knights_active
		clear_event_target = firstborn_commander
	}
}

character_event = {
	id = knights.14
	desc = {
		trigger = {
			NOT = { has_landed_title = e_arathor }
		}
		text = EVTDESCKNIGHTS.14a # The king of Stromgarde, [From.GetBestName], has order the creation of a knightly order: the Order of the Firstborn. These knights are sworn to Stromgarde, and are unified under a structured and hierarchical organization.
	}
	desc = {
		trigger = {
			has_landed_title = e_arathor
		}
		text = EVTDESCKNIGHTS.14b # The high king of Arathor, [From.GetBestName], has order the creation of a knightly order: the Order of the Firstborn. These knights are sworn to Arathor, and are unified under a structured and hierarchical organization.
	}
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.8 # Interesting.
	}
}

character_event = {
	id = knights.15
	desc = EVTDESCKNIGHTS.15 # Due to the current circumstances, the Order of the Firstborn has been disbanded.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_landed_title = d_order_of_the_firstborn
		any_liege = {
			NOR = {
				trait = human
				NOT = {
					trait = undead_scourge
					trait = undead_forsaken
					trait = undead_generic
				}
				OR = {
					has_landed_title = k_stromgarde
					has_landed_title = e_arathor
				}
			}
		}
	}
	
	immediate = {
		activate_title = { title = d_order_of_the_firstborn status = no }
		clr_global_flag = strom_knights_active
	}
	
	option = {
		name = EVTOPTKNIGHTS.9 # ... very well.
	}
}

character_event = {
	id = knights.16
	desc = EVTDESCKNIGHTS.16 # You have ordered the forming of the Knights of the North, a chivalrous order of Knights under the authority of Lordaeron. One of your houseshold knights, [north_commander.GetBestName] has been granted the title of Knight-Commander in the Knights.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.16 # For Lordaeron!
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					ai = no
					trait = human
					NOR = {
						trait = undead_generic
						trait = undead_scourge
						trait = undead_forsaken
					}
				}
				character_event = { id = knights.17 }
			}
		}
		set_global_flag = lord_knights_active
		clear_event_target = north_commander
	}
}

character_event = {
	id = knights.17
	desc = EVTDESCKNIGHTS.17 # The king of Lordaeron, [From.GetBestName], has order the creation of a knightly order: the Knights of the North. These knights are sworn to Lordaeron, and are unified under a structured and hierarchical organization.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.8 # Interesting.
	}
}

character_event = {
	id = knights.18
	desc = EVTDESCKNIGHTS.18 # Due to the current circumstances, the Knights of the North has been disbanded.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_landed_title = d_knights_of_the_north
		any_liege = {
			NOR = {
				trait = human
				NOT = {
					trait = undead_scourge
					trait = undead_forsaken
					trait = undead_generic
				}
				has_landed_title = k_lordaeron
			}
		}
	}
	
	immediate = {
		activate_title = { title = d_knights_of_the_north status = no }
		clr_global_flag = lord_knights_active
	}
	
	option = {
		name = EVTOPTKNIGHTS.9 # ... very well.
	}
}

character_event = {
	id = knights.19
	desc = EVTDESCKNIGHTS.19 # You have ordered the forming of the Wolfpack, a chivalrous order of Knights under the authority of Gilneas. One of your houseshold knights, [wolf_commander.GetBestName] has been granted the title of Knight-Commander in the Wolfpack.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.19 # For Gilneas!
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					ai = no
					trait = human
					NOR = {
						trait = undead_generic
						trait = undead_scourge
						trait = undead_forsaken
					}
				}
				character_event = { id = knights.19 }
			}
		}
		set_global_flag = gil_knights_active
		clear_event_target =  wolf_commander
	}
}

character_event = {
	id = knights.20
	desc = EVTDESCKNIGHTS.20 # The king of Gilneas, [From.GetBestName], has order the creation of a knightly order: the Wolfpack. These knights are sworn to Gilneas, and are unified under a structured and hierarchical organization.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTKNIGHTS.8 # Interesting.
	}
}

character_event = {
	id = knights.21
	desc = EVTDESCKNIGHTS.21 # Due to the current circumstances, the Wolfpack has been disbanded.
	picture = "GFX_evt_knight_kneeling"
	border = "GFX_event_normal_frame_diplomacy"
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		has_landed_title = d_wolfpack
		any_liege = {
			NOR = {
				trait = human
				NOT = {
					trait = undead_scourge
					trait = undead_forsaken
					trait = undead_generic
				}
				has_landed_title = k_gilneas
			}
		}
	}
	
	immediate = {
		activate_title = { title = d_wolfpack status = no }
		clr_global_flag = gil_knights_active
	}
	
	option = {
		name = EVTOPTKNIGHTS.9 # ... very well.
	}
}

#Knight-commander informed kid sent to be educated.
character_event = {
	id = knights.22
	desc = EVTDESCKNIGHTS.22 # [From.GetBestName] has sent by [From.GetHerHis] family to be educated in in the chivalric arts at your order.
	notification = yes
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}

character_event = {
	id = knights.23
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random = {
			chance = 40
			remove_trait = craven
			add_trait = brave
		}
		random = {
			chance = 20
			remove_trait = arbitrary
			add_trait = just
		}
		random = {
			chance = 15
			add_trait = strategist
		}
		if = {
			limit = {
				is_female = no
			}
			give_minor_title = knight_male
		}
		if = {
			limit = {
				is_female = yes
			}
			give_minor_title = knight_female
		}
	}
}

#Kid sent to knights returns.
character_event = {
	id = knights.24
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:sktk_liege = {
			character_event = { id = knights.25 }
			ROOT = {
				move_character = PREV
			}
		}
		random = {
			chance = 5
			add_trait = depressed
		}
		random = {
			chance = 25
			add_trait = craven
		}
		random = {
			chance = 20
			add_trait = stressed
		}
		random = {
			chance = 20
			add_trait = drunkard
		}
		random = {
			chance = 10
			random_list = {
				2 = {
					modifier = {
						factor = 0
						trait = celibate
					}
					add_trait = hedonist
				}
				1 = {
					add_trait = celibate
				}
				2 = {
					add_trait = socializer
				}
				1 = {
					if = {
						limit = {
							NOT = { trait = celibate }
							is_female = no
						}
						add_trait = seducer
					}
					if = {
						limit = {
							NOT = { trait = celibate }
							is_female = yes
						}
						add_trait = seductress
					}
				}
				2 = {
					add_trait = gamer
				}
				2 = {
					add_trait = poet
				}
				2 = {
					add_trait = falconer
				}
			}
		}
		random = {
			chance = 20
			remove_trait = diligent
			add_trait = slothful
		}
		random = {
			chance = 20
			remove_trait = chaste
			add_trait = lustful
		}
		random = {
			chance = 10
			add_trait = gregarious
		}
		random = {
			chance = 10
			remove_trait = zealous
			add_trait = cynical
		}
		prestige = -100
		clear_event_target =  sktk_liege
	}
}

#Liege is told.
character_event = {
	id = knights.25
	desc = EVTDESCKNIGHTS.25 # [From.GetFirstName] has returned from the knightly order, apparently having dropped out for some reason or another.
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTDALARAN.13 # This is a shameful display.
		opinion = {
			who = FROM
			modifier = opinion_disappointed
			years = 5
		}
	}
}