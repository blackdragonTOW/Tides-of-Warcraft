namespace = humsham

#Human shamans are a thing
narrative_event = {
	id = humsham.1
	title = EVTTITLEHUMSHAM.1 # The Elements
	desc = EVTDESCHUMSHAM.1 # In your sleep you are visited by a vision. In it, you can see how the world is made of elemental energies, how they interact and are integral to the world's well-being. You realise that these "elementals" are some the spirits revered by your people since time immemorial. And all you need to do is to reach out to them, and they'll reach out to you, too.
	picture = GFX_evt_furies
	border = GFX_event_narrative_frame_religion
	
	min_age = 16
	only_capable = yes
	prisoner = no
	religion = old_ways
	
	mean_time_to_happen = {
		years = 1200
		modifier = {
			factor = 0.5
			religion_authority = 0.5
		}
		modifier = {
			factor = 0.5
			has_game_rule = {
				name = troll_wars_events
				value = alternate
			}
		}
	}
	
	trigger = {
		NOT = {
			has_game_rule = {
				name = troll_wars_events
				value = off
			}
		}
		trait = healer
		NOR = {
			has_landed_title = d_tyrs_guard
			any_liege = {
				has_landed_title = d_tyrs_guard
			}
		}
		trait = race_human
		religion = old_ways
		has_global_flag = trollwars_bookmark
		NOR = {
			has_character_flag = rejected_elements
			has_global_flag = human_shamanism
			has_global_flag = holy_light_founded
			trait = lunatic
			trait = cynical
			any_liege = {
				government = kirin_tor_government
			}
			has_character_flag = has_adv_class
		}
	}
	
	option = {
		name = EVTOPTHUMSHAM.1a # Reach out.
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.25
				NOT = {
					has_game_rule = {
						name = troll_wars_events
						value = alternate
					}
				}
			}
		}
		piety = 200
		prestige = 100
		random = {
			chance = 40
			add_trait = zealous
		}
		set_global_flag = human_shamanism
		remove_trait = healer
		add_trait = shaman
	}
	
	option = {
		name = EVTOPTHOLYLIGHT.1b # A dream, nothing more.
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				NOT = {
					has_game_rule = {
						name = troll_wars_events
						value = alternate
					}
				}
			}
		}
		random = {
			chance = 50
			remove_trait = zealous
			add_trait = cynical
		}
		set_character_flag = rejected_elements
	}
}