########################
#### Creeps Helpers ####
########################
## Only use "TOW_province_add_creeps_X" to add creeps
## Check creeps presence with the variable "TOW_creep_level" (if it's over 0, there are creeps in the province)
## Check specific creeps presence with the variable "TOW_creep_level_NAME" (if it's over 0, there are creeps in the province)
## The total "TOW_creep_level" should be clamped between 0 and 10
########################

# Needs to have a creep_race_character event_target
TOW_province_add_creeps_3 = {
    if = {
        limit = { check_variable = { which = TOW_creep_level value <= 7 } }
        change_variable = { which = TOW_creep_level value = 3 }
        
        event_target:creep_race_character = {
            trigger_switch = {
                on_trigger = trait
                race_murloc = { PREV = { change_variable = { which = TOW_creep_level_murloc value = 3 } } }
                race_kobold = { PREV = { change_variable = { which = TOW_creep_level_kobold value = 3 } } }
                race_trogg = { PREV = { change_variable = { which = TOW_creep_level_trogg value = 3 } } }
                race_gnoll = { PREV = { change_variable = { which = TOW_creep_level_gnoll value = 3 } } }
            }
        }
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level value <= 8 } }
        set_variable = { which = TOW_creep_level value = 10 }
        event_target:creep_race_character = {
            trigger_switch = {
                on_trigger = trait
                race_murloc = { PREV = { change_variable = { which = TOW_creep_level_murloc value = 2 } } }
                race_kobold = { PREV = { change_variable = { which = TOW_creep_level_kobold value = 2 } } }
                race_trogg = { PREV = { change_variable = { which = TOW_creep_level_trogg value = 2 } } }
                race_gnoll = { PREV = { change_variable = { which = TOW_creep_level_gnoll value = 2 } } }
            }
        }
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level value <= 9 } }
        set_variable = { which = TOW_creep_level value = 10 }
        event_target:creep_race_character = {
            trigger_switch = {
                on_trigger = trait
                race_murloc = { PREV = { change_variable = { which = TOW_creep_level_murloc value = 1 } } }
                race_kobold = { PREV = { change_variable = { which = TOW_creep_level_kobold value = 1 } } }
                race_trogg = { PREV = { change_variable = { which = TOW_creep_level_trogg value = 1 } } }
                race_gnoll = { PREV = { change_variable = { which = TOW_creep_level_gnoll value = 1 } } }
            }
        }
    }
    trigger_switch = {
        on_trigger = trait
        race_murloc = {
            if = {
                limit = { check_variable = { which = TOW_creep_level_murloc value > 5 } }
                set_variable = { which = TOW_creep_level_murloc value = 5 }
            }
        }
        race_kobold = {
            if = {
                limit = { check_variable = { which = TOW_creep_level_kobold value > 5 } }
                set_variable = { which = TOW_creep_level_kobold value = 5 }
            }
        }
        race_trogg = {
            if = {
                limit = { check_variable = { which = TOW_creep_level_trogg value > 5 } }
                set_variable = { which = TOW_creep_level_trogg value = 5 }
            }
        }
        race_gnoll = {
            if = {
                limit = { check_variable = { which = TOW_creep_level_gnoll value > 5 } }
                set_variable = { which = TOW_creep_level_gnoll value = 5 }
            }
        }
    }
    TOW_province_update_creeps_modifiers = yes
}

TOW_prev_province_remove_same_race_creeps = {
    trigger_switch = {
        on_trigger = trait
        race_murloc = {
            PREV = { 
                subtract_variable = { which = TOW_creep_level which = TOW_creep_level_murloc }
                set_variable = { which = TOW_creep_level_murloc value = 0 }
            }
        }
        race_kobold = {
            PREV = { 
                subtract_variable = { which = TOW_creep_level which = TOW_creep_level_kobold }
                set_variable = { which = TOW_creep_level_kobold value = 0 }
            }
        }
        race_trogg = {
            PREV = { 
                subtract_variable = { which = TOW_creep_level which = TOW_creep_level_trogg }
                set_variable = { which = TOW_creep_level_trogg value = 0 }
            }
        }
        race_gnoll = {
            PREV = { 
                subtract_variable = { which = TOW_creep_level which = TOW_creep_level_gnoll }
                set_variable = { which = TOW_creep_level_gnoll value = 0 }
            }
        }
    }
    PREV = { TOW_province_update_creeps_modifiers = yes }
}

TOW_province_update_creeps_modifiers = {
    if = {
        limit = { check_variable = { which = TOW_creep_level_murloc value == 1 } }
        add_province_modifier = { name = TOW_murloc_presence_1 duration = -1 }
        remove_province_modifier = TOW_murloc_presence_2
        remove_province_modifier = TOW_murloc_presence_3
        remove_province_modifier = TOW_murloc_presence_4
        remove_province_modifier = TOW_murloc_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_murloc value == 2 } }
        remove_province_modifier = TOW_murloc_presence_1
        add_province_modifier = { name = TOW_murloc_presence_2 duration = -1 }
        remove_province_modifier = TOW_murloc_presence_3
        remove_province_modifier = TOW_murloc_presence_4
        remove_province_modifier = TOW_murloc_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_murloc value == 3 } }
        remove_province_modifier = TOW_murloc_presence_1
        remove_province_modifier = TOW_murloc_presence_2
        add_province_modifier = { name = TOW_murloc_presence_3 duration = -1 }
        remove_province_modifier = TOW_murloc_presence_4
        remove_province_modifier = TOW_murloc_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_murloc value == 4 } }
        remove_province_modifier = TOW_murloc_presence_1
        remove_province_modifier = TOW_murloc_presence_2
        remove_province_modifier = TOW_murloc_presence_3
        add_province_modifier = { name = TOW_murloc_presence_4 duration = -1 }
        remove_province_modifier = TOW_murloc_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_murloc value == 5 } }
        remove_province_modifier = TOW_murloc_presence_1
        remove_province_modifier = TOW_murloc_presence_2
        remove_province_modifier = TOW_murloc_presence_3
        remove_province_modifier = TOW_murloc_presence_4
        add_province_modifier = { name = TOW_murloc_presence_5 duration = -1 }
    }
    else = {
        remove_province_modifier = TOW_murloc_presence_1
        remove_province_modifier = TOW_murloc_presence_2
        remove_province_modifier = TOW_murloc_presence_3
        remove_province_modifier = TOW_murloc_presence_4
        remove_province_modifier = TOW_murloc_presence_5
    }
    if = {
        limit = { check_variable = { which = TOW_creep_level_kobold value == 1 } }
        add_province_modifier = { name = TOW_kobold_presence_1 duration = -1 }
        remove_province_modifier = TOW_kobold_presence_2
        remove_province_modifier = TOW_kobold_presence_3
        remove_province_modifier = TOW_kobold_presence_4
        remove_province_modifier = TOW_kobold_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_kobold value == 2 } }
        remove_province_modifier = TOW_kobold_presence_1
        add_province_modifier = { name = TOW_kobold_presence_2 duration = -1 }
        remove_province_modifier = TOW_kobold_presence_3
        remove_province_modifier = TOW_kobold_presence_4
        remove_province_modifier = TOW_kobold_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_kobold value == 3 } }
        remove_province_modifier = TOW_kobold_presence_1
        remove_province_modifier = TOW_kobold_presence_2
        add_province_modifier = { name = TOW_kobold_presence_3 duration = -1 }
        remove_province_modifier = TOW_kobold_presence_4
        remove_province_modifier = TOW_kobold_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_kobold value == 4 } }
        remove_province_modifier = TOW_kobold_presence_1
        remove_province_modifier = TOW_kobold_presence_2
        remove_province_modifier = TOW_kobold_presence_3
        add_province_modifier = { name = TOW_kobold_presence_4 duration = -1 }
        remove_province_modifier = TOW_kobold_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_kobold value == 5 } }
        remove_province_modifier = TOW_kobold_presence_1
        remove_province_modifier = TOW_kobold_presence_2
        remove_province_modifier = TOW_kobold_presence_3
        remove_province_modifier = TOW_kobold_presence_4
        add_province_modifier = { name = TOW_kobold_presence_5 duration = -1 }
    }
    else = {
        remove_province_modifier = TOW_kobold_presence_1
        remove_province_modifier = TOW_kobold_presence_2
        remove_province_modifier = TOW_kobold_presence_3
        remove_province_modifier = TOW_kobold_presence_4
        remove_province_modifier = TOW_kobold_presence_5
    }
    if = {
        limit = { check_variable = { which = TOW_creep_level_trogg value == 1 } }
        add_province_modifier = { name = TOW_trogg_presence_1 duration = -1 }
        remove_province_modifier = TOW_trogg_presence_2
        remove_province_modifier = TOW_trogg_presence_3
        remove_province_modifier = TOW_trogg_presence_4
        remove_province_modifier = TOW_trogg_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_trogg value == 2 } }
        remove_province_modifier = TOW_trogg_presence_1
        add_province_modifier = { name = TOW_trogg_presence_2 duration = -1 }
        remove_province_modifier = TOW_trogg_presence_3
        remove_province_modifier = TOW_trogg_presence_4
        remove_province_modifier = TOW_trogg_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_trogg value == 3 } }
        remove_province_modifier = TOW_trogg_presence_1
        remove_province_modifier = TOW_trogg_presence_2
        add_province_modifier = { name = TOW_trogg_presence_3 duration = -1 }
        remove_province_modifier = TOW_trogg_presence_4
        remove_province_modifier = TOW_trogg_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_trogg value == 4 } }
        remove_province_modifier = TOW_trogg_presence_1
        remove_province_modifier = TOW_trogg_presence_2
        remove_province_modifier = TOW_trogg_presence_3
        add_province_modifier = { name = TOW_trogg_presence_4 duration = -1 }
        remove_province_modifier = TOW_trogg_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_trogg value == 5 } }
        remove_province_modifier = TOW_trogg_presence_1
        remove_province_modifier = TOW_trogg_presence_2
        remove_province_modifier = TOW_trogg_presence_3
        remove_province_modifier = TOW_trogg_presence_4
        add_province_modifier = { name = TOW_trogg_presence_5 duration = -1 }
    }
    else = {
        remove_province_modifier = TOW_trogg_presence_1
        remove_province_modifier = TOW_trogg_presence_2
        remove_province_modifier = TOW_trogg_presence_3
        remove_province_modifier = TOW_trogg_presence_4
        remove_province_modifier = TOW_trogg_presence_5
    }
    if = {
        limit = { check_variable = { which = TOW_creep_level_gnoll value == 1 } }
        add_province_modifier = { name = TOW_gnoll_presence_1 duration = -1 }
        remove_province_modifier = TOW_gnoll_presence_2
        remove_province_modifier = TOW_gnoll_presence_3
        remove_province_modifier = TOW_gnoll_presence_4
        remove_province_modifier = TOW_gnoll_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_gnoll value == 2 } }
        remove_province_modifier = TOW_gnoll_presence_1
        add_province_modifier = { name = TOW_gnoll_presence_2 duration = -1 }
        remove_province_modifier = TOW_gnoll_presence_3
        remove_province_modifier = TOW_gnoll_presence_4
        remove_province_modifier = TOW_gnoll_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_gnoll value == 3 } }
        remove_province_modifier = TOW_gnoll_presence_1
        remove_province_modifier = TOW_gnoll_presence_2
        add_province_modifier = { name = TOW_gnoll_presence_3 duration = -1 }
        remove_province_modifier = TOW_gnoll_presence_4
        remove_province_modifier = TOW_gnoll_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_gnoll value == 4 } }
        remove_province_modifier = TOW_gnoll_presence_1
        remove_province_modifier = TOW_gnoll_presence_2
        remove_province_modifier = TOW_gnoll_presence_3
        add_province_modifier = { name = TOW_gnoll_presence_4 duration = -1 }
        remove_province_modifier = TOW_gnoll_presence_5
    }
    else_if = {
        limit = { check_variable = { which = TOW_creep_level_gnoll value == 5 } }
        remove_province_modifier = TOW_gnoll_presence_1
        remove_province_modifier = TOW_gnoll_presence_2
        remove_province_modifier = TOW_gnoll_presence_3
        remove_province_modifier = TOW_gnoll_presence_4
        add_province_modifier = { name = TOW_gnoll_presence_5 duration = -1 }
    }
    else = {
        remove_province_modifier = TOW_gnoll_presence_1
        remove_province_modifier = TOW_gnoll_presence_2
        remove_province_modifier = TOW_gnoll_presence_3
        remove_province_modifier = TOW_gnoll_presence_4
        remove_province_modifier = TOW_gnoll_presence_5
    }
}