### Characters Scripted Effects

### New character assignement based on Culture

TOW_initialize_character_race_from_culture = {
	if = {
		limit = {
			has_character_flag = race_assigned
		}
		log = "Tides Of Warcraft -- Warning : Trying to assign a race on a character ([This.GetTitledName]) who already has the race_assigned flag !"
	}

	set_character_flag = race_assigned
	trigger_switch = {
		on_trigger = culture_group
		
		human = { add_trait = human }
		orcish = {
			if = {
				limit = {
					OR = {
						NOT = { culture = twilights_hammer }
						has_global_flag = thirdwar_bookmark
						has_global_flag = wow_bookmark
						#Twilight's hammer was destroyed during second war, or at any point before
					}
				}
				add_trait = orc
				if = {
					limit = {
						culture = twilights_hammer
						set_graphical_culture = orc_gfx
					}
				}
			}
			else = {
				add_trait = pale_orc
			}
		}
		dwarf = { add_trait = AK_trait_dwarf }
		gnome = { add_trait = gnome }
		goblin = { add_trait = goblin }
		ogre = { add_trait = ogre }
		murloc = { add_trait = murloc }
		gnoll = { add_trait = gnoll }
		naga = { add_trait = naga }
		kobold = { add_trait = kobold }
		trogg = { add_trait = trogg }
	}
	trigger_switch = {
		on_trigger = culture
		
		high_elven = { add_trait = high_elf }
		blood_elven = { add_trait = blood_elf }
		felblood = {
			add_trait = blood_elf
			set_graphical_culture = felblood
			culture = blood_elven
			add_trait = felsworn
		}
		wretched = {
			add_trait = wretched
			set_graphical_culture = wretched
			culture = blood_elven
		}
		red_dragonflight = { add_trait = dragon_red }
		blue_dragonflight = { add_trait = dragon_blue }
		bronze_dragonflight = { add_trait = dragon_bronze }
		green_dragonflight = { add_trait = dragon_green }
		black_dragonflight = { add_trait = dragon_black }
		chromatic_dragonflight = { add_trait = dragon_chromatic }
		twilight_dragonflight = { add_trait = dragon_twilight }
		infinite_dragonflight = { add_trait = dragon_infinite }
		nightmare_dragonflight = { add_trait = dragon_nightmare }
		scourge = {
			add_trait = human
			add_trait = undead_scourge
		}
		forsaken = {
			add_trait = human
			add_trait = undead_forsaken
		}
		amani = { add_trait = troll_forest }
		atalai = { add_trait = troll_jungle }
		razorbranch = { add_trait = troll_jungle }
		firetree = { add_trait = troll_forest }
		mossflayer = { add_trait = troll_forest }
		revantusk = { add_trait = troll_forest }
		vilebranch = { add_trait = troll_forest }
		shadowpine = { add_trait = troll_forest }
		witherbark = { add_trait = troll_forest }
		bloodscalp = { add_trait = troll_jungle }
		darkspear = { add_trait = troll_jungle }
		gurubashi = { add_trait = troll_jungle }
		shatterspear = { add_trait = troll_jungle }
		skullsplitter = { add_trait = troll_jungle }
		drakkari = { add_trait = troll_ice }
		frostmane = { add_trait = troll_ice }
		sandfury = { add_trait = troll_sand }
		#hakkari = { add_trait = troll_hakkari }
		smolderthorn = { add_trait = troll_forest }
		shadowglen = { add_trait = troll_forest }
		winterax = { add_trait = troll_ice }
		winterfang = { add_trait = troll_ice }
		shadowtooth = { add_trait = troll_dark }
		zandalari = { add_trait = troll_zandalari }
		eredar = { add_trait = eredar }
		nathrezim = { add_trait = dreadlord }
		sayaad = { add_trait = succubus }
		ered_ruin = { add_trait = doomlord }
		annihilan = { add_trait = pit_lord } 
		mo_arg = { add_trait = fel_lord }
		shivarra = { add_trait = shivarra }
		draenei = { add_trait = draenei }
		broken = { add_trait = broken }
		lost_one = { add_trait = lost_one }
		nraqi = { add_trait = faceless }
		voidwalker = { add_trait = voidwalker }
		air_elemental = { add_trait = air_elemental }
		earth_elemental = { add_trait = earth_elemental }
		fire_elemental = { add_trait = fire_elemental }
		water_elemental = { add_trait = water_elemental }
	}
}

TOW_update_character_race_from_liege = {
	if = {
		limit = { trait = orc }
	
		if = {
			limit = {
				liege = {
					graphical_culture = borcgfx
				}
				set_graphical_culture = mag_har
			}
		}
		elseif = {
			limit = {
				liege = {
					graphical_culture = rorcgfx
				}
				set_graphical_culture = fel_orc
			}
		}
	}


	if = {
		limit = { trait = high_elf }
		if = {
			limit = {
				liege = {
					graphical_culture = welvengfx
					trait = wretched
				}
				set_graphical_culture = wretched
			}
		}
	}

	if = {
		limit = { trait = blood_elf }

		#if = {
		#	limit = {
		#		liege = {
		#			graphical_culture = felvengfx
		#		}
		#		set_graphical_culture = felblood
		#	}
		#}
		if = {
			limit = {
				liege = {
					graphical_culture = welvengfx
					trait = wretched
				}
				set_graphical_culture = wretched
			}
		}
	}
}