council_of_tirisfal = {
	primary_attribute = learning
	is_secret = yes
	opinion_to_other_members = +10
	opinion_per_rank_above = +5
	sound = secret_cults_interface
	society_ranks_gfx = secret_ranks
	non_interference = {
		always = yes
	}
	active = {
		OR = {
			NOT = { has_global_flag = trollwars_bookmark }
			NOT = { has_global_flag = secondwar_bookmark }
			has_global_flag = tirisfalen_council_founded
		}
		NOT = { has_global_flag = tirisfalen_council_destroyed }
	}
	
	indestructible = yes
	
	can_join_society = {
		hidden_trigger = {
			NAND = {
				ai = yes
				is_society_rank_full = { 
					society = council_of_tirisfal
					rank = 1
				}
			}
		}
		age = 16
		any_society_member = { society_member_of = council_of_tirisfal }
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		trait = mage
		learning = 20
		NOR = {
			trait = troll_dark
			trait = troll_jungle
			trait = troll_forest
			trait = troll_ice
			trait = troll_sand
			trait = troll_zandalari
			trait = ogre_magi
			trait = undead_scourge
			trait = undead_forsaken
			trait = undead_generic
		}
	}
	potential = {
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		trait = mage
		learning = 20
		NOR = {
			trait = troll_dark
			trait = troll_jungle
			trait = troll_forest
			trait = troll_ice
			trait = troll_sand
			trait = troll_zandalari
			trait = ogre_magi
			trait = undead_scourge
			trait = undead_forsaken
			trait = undead_generic
		}
	}
	
	show_society = {
		age = 16
		any_society_member = { society_member_of = council_of_tirisfal }
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		trait = mage
		learning = 20
	}
	
	society_rank = {
		level = 1
		limit = 15
		startup_limit = 15
		decisions = {
			
		}
	}
	
	society_rank = {
		level = 2
		limit = 10
		startup_limit = 10
		modifier = { 
			is_visible = {
				OR = {
					society_member_of = council_of_tirisfal
					FROM = { is_society_discovered = yes }
				}
			}
			intrigue = 1
		}
		decisions = {
			tirisfalen_investigate_character
		}
	}
	
	society_rank = {
		level = 3
		limit = 5
		startup_limit = 5
		modifier = {
			is_visible = {
				OR = {
					society_member_of = council_of_tirisfal
					FROM = { is_society_discovered = yes }
				}
			}
			intrigue = 2
		}
		decisions = {
			slander_ruler
		}
	}
	
	society_rank = {
		level = 4
		limit = 1
		startup_limit = 1
		modifier = { 
			intrigue = 3
			is_visible = {
				OR = {
					society_member_of = council_of_tirisfal
					FROM = { is_society_discovered = yes }
				}
			}
		}
		decisions = {
			blackmail_ruler
		}
	}
	
	monthly_currency_gain = {
		name = currency_name_tirisfalen
		
		per_attribute = {
    		name = learning
    		value = 0.5
    	}
		has_trait = {
			trait = scholarly_theologian
			value = 2
		}
		has_trait = {
			trait = mastermind_theologian
			value = 4
		}
		has_trait = {
			trait = mage
			value = 4
		}
		has_trait = {
			trait = diligent
			value = 1
		}
		has_trait = {
			trait = strategist
			value = 2
		}
		has_trait = {
			trait = genius
			value = 4
		}
		has_trait = {
			trait = quick
			value = 2
		}
		has_trait = {
			trait = shrewd
			value = 1
		}
		has_trait = {
			trait = scholar
			value = 2
		}
		has_trait = {
			trait = erudite
			value = 2
		}
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100
	
	member_score = {
		value = 10

		modifier = {
			trait = scholarly_theologian
			factor = 1.2
		}
		modifier = {
			trait = mage
			factor = 1.4
		}
		modifier = {
			trait = mastermind_theologian
			factor = 1.4
		}
		modifier = {
			trait = diligent
			factor = 1.1
		}
		modifier = {
			trait = strategist
			factor = 1.2
		}
		modifier = {
			trait = genius
			factor = 1.1
		}
		modifier = {
			trait = quick
			factor = 1.1
		}
		modifier = {
			trait = shrewd
			factor = 1.1
		}
		modifier = {
			trait = scholar
			factor = 1.1
		}
		modifier = {
			trait = erudite
			factor = 1.2
		}
	}
	
	startup_populate = {
	    trigger = {
			NOT = { has_global_flag = trollwars_bookmark }
			NOT = { has_global_flag = second_war_bookmark }
			ai = yes
	    	controls_religion = no
		   	age = 16
			OR = {
				religion = arcane
				secret_religion = arcane
			}
			trait = mage
			learning = 20
			NOR = {
				trait = troll_dark
				trait = troll_jungle
				trait = troll_forest
				trait = troll_ice
				trait = troll_sand
				trait = troll_zandalari
				trait = ogre_magi
				trait = undead_scourge
				trait = undead_forsaken
				trait = undead_generic
			}
			is_in_society = no
			NOT = { higher_tier_than = DUKE }
			NOR = {
				mercenary = yes
				holy_order = yes
			}
		}
	}
}

tirisgarde = {
	primary_attribute = learning
	is_secret = yes
	opinion_to_other_members = +10
	opinion_per_rank_above = +5
	sound = secret_cults_interface
	society_ranks_gfx = secret_ranks
	non_interference = {
		always = yes
	}
	active = {
		OR = {
			NOT = { has_global_flag = trollwars_bookmark }
			AND = {
				NOT = { has_global_flag = secondwar_bookmark }
				has_global_flag = tirisfalen_guard_reformed
			}
			has_global_flag = tirisfalen_guard_founded
			has_global_flag = tirisfalen_guard_reformed
		}
		NOT = { has_global_flag = tirisfalen_council_destroyed }
	}
	
	indestructible = yes
	
	can_join_society = {
		hidden_trigger = {
			NAND = {
				ai = yes
				is_society_rank_full = { 
					society = tirisgarde
					rank = 1
				}
			}
		}
		age = 16
		any_society_member = { society_member_of = tirisgarde }
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		OR = {
			trait = mage
			trait = arcanist
		}
		martial = 10
		NOR = { # Will change this when I get to wow era
			trait = troll_dark
			trait = troll_jungle
			trait = troll_forest
			trait = troll_ice
			trait = troll_sand
			trait = troll_zandalari
			trait = ogre_magi
		}
	}
	potential = {
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		OR = {
			trait = mage
			trait = arcanist
		}
		martial = 10
		NOR = { # Will change this when I get to wow era
			trait = troll_dark
			trait = troll_jungle
			trait = troll_forest
			trait = troll_ice
			trait = troll_sand
			trait = troll_zandalari
			trait = ogre_magi
		}
	}
	
	show_society = {
		age = 16
		any_society_member = { society_member_of = council_of_tirisfal }
		any_society_member = { society_member_of = tirisgarde }
		OR = {
			religion = arcane
			secret_religion = arcane
		}
		OR = {
			trait = arcanist
			trait = mage
		}
		martial = 10
	}
	
	society_rank = {
		level = 1
		limit = 100
		startup_limit = 100
		decisions = {
			
		}
	}
	
	society_rank = {
		level = 2
		limit = 50
		startup_limit = 50
		modifier = { 
			is_visible = {
				OR = {
					society_member_of = council_of_tirisfal
					society_member_of = tirisgarde
					FROM = { is_society_discovered = yes }
				}
			}
			martial = 1
		}
		decisions = {
			tirisfalen_investigate_character
		}
	}
	
	society_rank = {
		level = 3
		limit = 25
		startup_limit = 25
		modifier = {
			is_visible = {
				OR = {
					society_member_of = tyrs_guard_society
					society_member_of = tirisgarde
					FROM = { is_society_discovered = yes }
				}
			}
			martial = 2
		}
		decisions = {
			tirisfalen_purge_evil
		}
	}
	
	society_rank = {
		level = 4
		limit = 5
		startup_limit = 5
		modifier = { 
			martial = 3
			is_visible = {
				OR = {
					society_member_of = tyrs_guard_society
					society_member_of = tirisgarde
					FROM = { is_society_discovered = yes }
				}
			}
		}
		decisions = {
			tirisfalen_purge_corruption
		}
	}
	
	monthly_currency_gain = {
		name = currency_name_tirisfalen
		
		per_attribute = {
    		name = learning
    		value = 0.5
    	}
		per_attribute = {
			name = martial
			value = 0.5
		}
		has_trait = {
			trait = scholarly_theologian
			value = 2
		}
		has_trait = {
			trait = mastermind_theologian
			value = 4
		}
		has_trait = {
			trait = mage
			value = 4
		}
		has_trait = {
			trait = arcanist
			value = 1
		}
		has_trait = {
			trait = diligent
			value = 1
		}
    	has_trait = {
			trait = brave
			value = 1
		}
		has_trait = {
			trait = strategist
			value = 2
		}
		has_trait = {
			trait = genius
			value = 4
		}
		has_trait = {
			trait = quick
			value = 2
		}
		has_trait = {
			trait = shrewd
			value = 1
		}
		has_trait = {
			trait = scholar
			value = 2
		}
		has_trait = {
			trait = erudite
			value = 2
		}
		society_rank = {
			rank = 4
			value = 10
		}
	}

	member_score_per_attribute = 3
	member_score_per_rank = 100
	
	member_score = {
		value = 10

		modifier = {
			trait = scholarly_theologian
			factor = 1.2
		}
		modifier = {
			trait = mage
			factor = 1.4
		}
		modifier = {
			trait = mastermind_theologian
			factor = 1.4
		}
		modifier = {
			trait = diligent
			factor = 1.1
		}
    	modifier = {
			trait = brave
			factor = 1.2
		}
		modifier = {
			trait = strategist
			factor = 1.2
		}
		modifier = {
			trait = genius
			factor = 1.1
		}
		modifier = {
			trait = quick
			factor = 1.1
		}
		modifier = {
			trait = shrewd
			factor = 1.1
		}
		modifier = {
			trait = scholar
			factor = 1.1
		}
		modifier = {
			trait = erudite
			factor = 1.2
		}
		modifier = {
			trait = arcanist
			factor = 1.1
		}
	}
	
	startup_populate = {
	    trigger = {
			NOT = { has_global_flag = trollwars_bookmark }
			NOT = { has_global_flag = second_war_bookmark }
			ai = yes
	    	controls_religion = no
		   	age = 16
			OR = {
				religion = arcane
				secret_religion = arcane
			}
			OR = {
				trait = arcanist
				trait = mage
			}
			martial = 10
			is_in_society = no
			NOT = { higher_tier_than = DUKE }
			NOR = {
				mercenary = yes
				holy_order = yes
			}
		}
	}
}